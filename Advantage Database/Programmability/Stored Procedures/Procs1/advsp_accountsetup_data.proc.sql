if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[advsp_accountsetup_data]') and OBJECTPROPERTY(id, N'IsProcedure') = 1)
drop procedure [dbo].[advsp_accountsetup_data]
GO



CREATE PROCEDURE [dbo].[advsp_accountsetup_data] 
	@JOB_NUMBER INT,
	@JOB_COMPONENT_NBR INT
AS
BEGIN
	
	SELECT ACCOUNT_SETUP_FORM.ACCT_SETUP_ID AS ID,
	   ACCOUNT_SETUP_FORM.JOB_NUMBER AS JobNumber,
	   ACCOUNT_SETUP_FORM.JOB_COMPONENT_NBR AS JobComponentNumber,
	   ACCOUNT_SETUP_FORM.CL_CODE AS ClientCode,
	   CLIENT.CL_NAME AS ClientName, 
	   ACCOUNT_SETUP_FORM.DIV_CODE AS DivisionCode,
	   DIVISION.DIV_NAME AS DivisionName,
	   ACCOUNT_SETUP_FORM.PRD_CODE AS ProductCode,
	   PRODUCT.PRD_DESCRIPTION AS ProductName,
	   ACCOUNT_SETUP_FORM.ACCT_SETUP_CODE_1 AS AccountSetupCode1,
	   ACCOUNT_SETUP_FORM.ACCT_SETUP_CODE_2 AS AccountSetupCode2,
	   ACCOUNT_SETUP_FORM.ACCT_SETUP_CODE_3 AS AccountSetupCode3,
	   ACCOUNT_SETUP_FORM.ACCT_SETUP_CODE_4 AS AccountSetupCode4,
	   ACCOUNT_SETUP_FORM.PERCENT_SPLIT AS PercentSplit,
	   ACCOUNT_SETUP_FORM.BALANCED AS Balanced
	FROM ACCOUNT_SETUP_FORM LEFT OUTER JOIN PRODUCT ON PRODUCT.CL_CODE = ACCOUNT_SETUP_FORM.CL_CODE AND PRODUCT.DIV_CODE = ACCOUNT_SETUP_FORM.DIV_CODE AND PRODUCT.PRD_CODE = ACCOUNT_SETUP_FORM.PRD_CODE
							LEFT OUTER JOIN DIVISION ON DIVISION.CL_CODE = ACCOUNT_SETUP_FORM.CL_CODE AND DIVISION.DIV_CODE = ACCOUNT_SETUP_FORM.DIV_CODE
							LEFT OUTER JOIN CLIENT ON CLIENT.CL_CODE = ACCOUNT_SETUP_FORM.CL_CODE
	WHERE JOB_NUMBER = @JOB_NUMBER AND JOB_COMPONENT_NBR = @JOB_COMPONENT_NBR


END






















