CREATE PROCEDURE [dbo].[advsp_media_plan_estimate_template_outdoor_types]
	@MEDIA_PLAN_ESTIMATE_TEMPLATE_ID int
AS

SELECT
	Selected = CAST(CASE WHEN mpetot.OD_CODE IS NOT NULL THEN 1 ELSE 0 END as bit),
	OutOfHomeTypeCode = ot.OD_CODE,
	OutOfHomeTypeDescription = ot.OD_DESC 
FROM dbo.OUTDOOR_TYPE ot
	LEFT OUTER JOIN dbo.MEDIA_PLAN_ESTIMATE_TEMPLATE_OUTDOOR_TYPE mpetot ON ot.OD_CODE = mpetot.OD_CODE AND mpetot.MEDIA_PLAN_ESTIMATE_TEMPLATE_ID = @MEDIA_PLAN_ESTIMATE_TEMPLATE_ID
WHERE COALESCE(ot.INACTIVE_FLAG,0) = 0
ORDER BY ot.OD_DESC 
GO
