
CREATE PROCEDURE [dbo].[usp_wv_AGY_SETTINGS_INSERT_UPDATE] /*WITH ENCRYPTION*/
@AGY_SETTINGS_CODE   VARCHAR(20),
@AGY_SETTINGS_DESC   VARCHAR(100),
@AGY_SETTINGS_VALUE  SQL_VARIANT,
@AGY_SETTINGS_DEF    SQL_VARIANT
AS
/*=========== QUERY ===========*/
    IF EXISTS (
           SELECT *
           FROM   AGY_SETTINGS WITH(NOLOCK)
           WHERE  AGY_SETTINGS_CODE = @AGY_SETTINGS_CODE
       )
		BEGIN
			--UPDATE
			UPDATE AGY_SETTINGS
			SET    AGY_SETTINGS_VALUE = @AGY_SETTINGS_VALUE
			WHERE  AGY_SETTINGS_CODE = @AGY_SETTINGS_CODE;
		END
    ELSE
		BEGIN
			--INSERT
			INSERT INTO AGY_SETTINGS
			  (
				AGY_SETTINGS_CODE,
				AGY_SETTINGS_DESC,
				AGY_SETTINGS_VALUE,
				AGY_SETTINGS_DEF
			  )
			VALUES
			  (
				@AGY_SETTINGS_CODE,
				@AGY_SETTINGS_DESC,
				@AGY_SETTINGS_VALUE,
				@AGY_SETTINGS_DEF
			  );
		END
/*=========== QUERY ===========*/
