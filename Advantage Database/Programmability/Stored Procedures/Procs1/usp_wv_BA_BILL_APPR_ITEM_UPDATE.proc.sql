--DROP PROCEDURE [dbo].[usp_wv_BA_BILL_APPR_ITEM_UPDATE] 
CREATE PROCEDURE [dbo].[usp_wv_BA_BILL_APPR_ITEM_UPDATE] 
@BA_ITEM_ID AS INTEGER,
@APPROVED_AMT AS DECIMAL (16,2),
@APPROVAL_COMMENTS AS TEXT,
@INSTR AS TINYINT,
@CLIENT_COMMENTS AS TEXT,
@REC_TYPE AS VARCHAR(1),
@REC_ID AS INTEGER,
@BA_ID AS INTEGER,
@JOB_NUMBER AS INTEGER,
@JOB_COMPONENT_NBR AS SMALLINT,
@FNC_CODE AS VARCHAR(6),
--PASS THROUGH TO usp_wv_BA_BILL_APPR_ITEM_MARK_DETAIL_TABLE
@IS_PO AS SMALLINT,
@PO_NUMBER AS INTEGER,
@PO_LINE_NUMBER AS INTEGER,
@REC_DTL_ID AS INTEGER
AS
BEGIN

	UPDATE BILL_APPR_ITEM WITH(ROWLOCK)
	SET
		APPROVED_AMT = @APPROVED_AMT,
		ITEM_COMMENTS = @APPROVAL_COMMENTS,
		INSTR = @INSTR,
		CLIENT_COMMENTS = @CLIENT_COMMENTS,
		REC_DTL_ID = @REC_DTL_ID
	WHERE
		BILL_APPR_ITEM.BA_ITEM_ID = @BA_ITEM_ID;

	EXEC usp_wv_BA_BILL_APPR_ITEM_MARK_DETAIL_TABLE @REC_TYPE,@REC_ID,@BA_ID,@INSTR,@JOB_NUMBER,@JOB_COMPONENT_NBR,@FNC_CODE,@IS_PO,@PO_NUMBER,@PO_LINE_NUMBER;

END