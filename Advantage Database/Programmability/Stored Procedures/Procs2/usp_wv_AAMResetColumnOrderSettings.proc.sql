IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id(N'[dbo].[usp_wv_AAMResetColumnOrderSettings]') AND OBJECTPROPERTY(id, N'IsProcedure') = 1)
DROP PROCEDURE [dbo].[usp_wv_AAMResetColumnOrderSettings]
GO

/****** Object:  StoredProcedure [dbo].[usp_wv_AAMResetColumnOrderSettings]    Script Date: 7/21/2020 4:21:43 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE PROCEDURE [dbo].[usp_wv_AAMResetColumnOrderSettings] /*WITH ENCRYPTION*/
@GRID_NAME VARCHAR(100),
@USER_CODE VARCHAR(100)

AS

DECLARE @GRID_ID INT


SELECT @GRID_ID = GRID_ID FROM GRID WITH(NOLOCK) WHERE NAME = @GRID_NAME;

--RESET COLUMN ORDERING TO DEFAULT LOCATION
UPDATE GRID_COLUMN_SETTING WITH(ROWLOCK)
SET COLUMN_ORDER_ID = C.DEFAULT_ORDER_ID
FROM GRID_COLUMN C INNER JOIN GRID_COLUMN_SETTING S ON C.GRID_COLUMN_ID = S.GRID_COLUMN_ID
WHERE S.GRID_ID = @GRID_ID
AND S.USER_CODE = @USER_CODE