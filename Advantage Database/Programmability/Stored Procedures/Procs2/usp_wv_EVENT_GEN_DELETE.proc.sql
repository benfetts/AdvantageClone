
CREATE PROCEDURE [dbo].[usp_wv_EVENT_GEN_DELETE] /*WITH ENCRYPTION*/
@EVENT_GEN_ID INT
AS
/*=========== QUERY ===========*/

	DECLARE
		@USE_COUNT INT;
	
	SELECT @USE_COUNT = ISNULL(COUNT(1),0) FROM [EVENT] WITH(NOLOCK) WHERE EVENT_GEN_ID = @EVENT_GEN_ID;

	IF (@USE_COUNT = 0) 
	BEGIN
		DELETE FROM EVENT_GEN WITH(ROWLOCK) WHERE EVENT_GEN_ID = @EVENT_GEN_ID;
	END

	SELECT @USE_COUNT;

/*=========== QUERY ===========*/
