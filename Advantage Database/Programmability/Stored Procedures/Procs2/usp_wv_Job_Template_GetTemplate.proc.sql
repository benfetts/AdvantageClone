

CREATE PROCEDURE [dbo].[usp_wv_Job_Template_GetTemplate] 
@JTCODE AS VARCHAR(6)


AS

SET NOCOUNT ON

SELECT     
	JOB_TMPLT_DTL.ITEM_CODE
	, JOB_TMPLT_DTL.LABEL AS SHORT_DESC
	, JOB_TMPLT_DTL.SECTION_ORDER
	, ISNULL(JOB_TMPLT_DTL.ITEM_ORDER, 0) AS ITEM_ORDER
	, ISNULL(JOB_TMPLT_DTL.REQUIRED, 0) AS FIELD_REQUIRED_BY_TEMPLATE
	, JOB_TMPLT_ITEMS.ITEM_DESC AS LONG_DESC, JOB_TMPLT_ITEMS.ITEM_TYPE
	, ISNULL(JOB_TMPLT_ITEMS.ADVAN_REQ, 0) AS ADVAN_REQ
	, JOB_TMPLT_ITEMS.AGENCY_REQ_COL
	, JOB_TMPLT_ITEMS.CLIENT_REQ_COL
	, ISNULL(JOB_TMPLT_ITEMS.ALLOW_MULTI, 0) AS ALLOW_MULTI
	, JOB_TMPLT_ITEMS.CONTROL_TYPE
	, JOB_TMPLT_ITEMS.UDV_TABLE_NAME
	
FROM         
	JOB_TMPLT_ITEMS RIGHT OUTER JOIN JOB_TMPLT_DTL 
		ON JOB_TMPLT_ITEMS.ITEM_CODE = JOB_TMPLT_DTL.ITEM_CODE
WHERE     
	(JOB_TMPLT_DTL.JOB_TMPLT_CODE = @JTCODE) 
	AND (JOB_TMPLT_DTL.INCLUDE = 1)
	AND  (NOT (CONTROL_TYPE IS NULL))
	
ORDER BY 
	JOB_TMPLT_DTL.SECTION_ORDER
	, JOB_TMPLT_DTL.ITEM_ORDER

