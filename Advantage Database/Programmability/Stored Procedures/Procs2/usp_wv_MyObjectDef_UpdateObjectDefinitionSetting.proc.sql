SET QUOTED_IDENTIFIER ON 
GO
SET ANSI_NULLS OFF 
GO
IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id(N'[dbo].[usp_wv_MyObjectDef_UpdateObjectDefinitionSetting]') AND OBJECTPROPERTY(id, N'IsProcedure') = 1)
DROP PROCEDURE [dbo].[usp_wv_MyObjectDef_UpdateObjectDefinitionSetting]
GO
CREATE PROCEDURE [dbo].[usp_wv_MyObjectDef_UpdateObjectDefinitionSetting] /*WITH ENCRYPTION*/
@OBJ_DEF_SETTINGS_ID INT,
@OBJECT_ID INT,
@DEFINITION_ID INT,
@IS_STATIC BIT,
@CHECKED BIT
AS
/*=========== QUERY ===========*/
	IF (EXISTS (SELECT [ID] FROM MY_OBJ_DEF_SETTINGS WITH(NOLOCK)
				WHERE [ID] = @OBJ_DEF_SETTINGS_ID))
	BEGIN
	
		UPDATE MY_OBJ_DEF_SETTINGS WITH(ROWLOCK)
		SET MY_OBJ_DEF_SETTINGS.CHECKED = @CHECKED
		WHERE
		MY_OBJ_DEF_SETTINGS.ID = @OBJ_DEF_SETTINGS_ID;
		
	END			
	ELSE
	BEGIN
		
		INSERT INTO MY_OBJ_DEF_SETTINGS ([OBJECT_ID], DEFINITION_ID, IS_STATIC, CHECKED)
		VALUES (@OBJECT_ID, @DEFINITION_ID, @IS_STATIC, @CHECKED);
		
	END	
/*=========== QUERY ===========*/
GO
SET QUOTED_IDENTIFIER ON 
GO
SET ANSI_NULLS ON 
GO