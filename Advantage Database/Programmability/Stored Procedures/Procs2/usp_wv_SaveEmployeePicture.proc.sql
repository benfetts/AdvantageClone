SET QUOTED_IDENTIFIER ON 
GO
SET ANSI_NULLS OFF 
GO
IF EXISTS (SELECT * FROM dbo.sysobjects WHERE id = object_id(N'[dbo].[usp_wv_SaveEmployeePicture]') AND OBJECTPROPERTY(id, N'IsProcedure') = 1)
DROP PROCEDURE [dbo].[usp_wv_SaveEmployeePicture]
GO
CREATE PROCEDURE [dbo].[usp_wv_SaveEmployeePicture] /*WITH ENCRYPTION*/
@EMP_CODE VARCHAR(6),
@IMAGE IMAGE
AS
/*=========== QUERY ===========*/
IF EXISTS (SELECT EMP_CODE FROM EMPLOYEE_PICTURE WHERE EMP_CODE = @EMP_CODE)
BEGIN
	UPDATE EMPLOYEE_PICTURE
	SET EMP_IMAGE = @IMAGE
	WHERE 
	EMP_CODE = @EMP_CODE;
END
ELSE
BEGIN
	INSERT INTO EMPLOYEE_PICTURE (EMP_CODE, EMP_IMAGE) VALUES (@EMP_CODE, @IMAGE);
END
/*=========== QUERY ===========*/
GO
SET QUOTED_IDENTIFIER ON 
GO
SET ANSI_NULLS ON 
GO