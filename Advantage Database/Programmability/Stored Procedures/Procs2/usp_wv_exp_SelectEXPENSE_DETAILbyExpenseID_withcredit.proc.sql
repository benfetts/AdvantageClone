



















CREATE PROCEDURE [dbo].[usp_wv_exp_SelectEXPENSE_DETAILbyExpenseID_withcredit]
@ExpID as Integer
AS

SET NOCOUNT ON
SET TRANSACTION ISOLATION LEVEL READ COMMITTED

SELECT
	[EXPDETAILID],
	[INV_NBR],
	[LINE_NBR],
	[ITEM_DATE],
	[ITEM_DESC],
	[CC_FLAG],
	EXPENSE_DETAIL.CL_CODE,
	[DIV_CODE],
	[PRD_CODE],
	[JOB_NBR],
	[JOB_COMP_NBR],
	JC.JOB_COMP_DESC,
	EXPENSE_DETAIL.FNC_CODE,
	F.FNC_DESCRIPTION,
	[QTY],
	[RATE],
	[CC_AMT],
	[AMOUNT],
	[AP_COMMENT],
	[CREATE_USER_ID],
	[MOD_USER_ID],
	[MOD_DATE]
FROM
	[dbo].[EXPENSE_DETAIL]
	LEFT OUTER JOIN JOB_COMPONENT JC ON JC.JOB_NUMBER = EXPENSE_DETAIL.JOB_NBR 
		AND JC.JOB_COMPONENT_NBR = EXPENSE_DETAIL.JOB_COMP_NBR
		AND JC.JOB_PROCESS_CONTRL NOT IN (7, 11) LEFT OUTER JOIN CLIENT C ON C.CL_CODE = EXPENSE_DETAIL.CL_CODE
	INNER JOIN FUNCTIONS F ON F.FNC_CODE = EXPENSE_DETAIL.FNC_CODE
WHERE 
	INV_NBR = @ExpID
Order By ITEM_DATE,LINE_NBR



















