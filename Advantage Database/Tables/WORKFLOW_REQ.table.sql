IF NOT EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[dbo].[WORKFLOW_REQ]') AND OBJECTPROPERTY(id, N'IsUserTable') = 1)
BEGIN

	CREATE TABLE [dbo].[WORKFLOW_REQ](
		[ID] [int] IDENTITY(1,1) NOT NULL,
		[WORKFLOW_ID] [int] NOT NULL,
		[WORKFLOW_REQUIREMENT_ID] [int] NOT NULL,
	 CONSTRAINT [PK_WORKFLOW_REQ_1] PRIMARY KEY CLUSTERED 
	(
		[ID] ASC
	)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
	) ON [PRIMARY];

END

IF NOT EXISTS (SELECT * 
               FROM sys.foreign_keys 
               WHERE object_id = OBJECT_ID(N'[dbo].[FK_WORKFLOW_REQ_WORKFLOW]') 
               AND parent_object_id = OBJECT_ID(N'[dbo].[WORKFLOW_REQ]'))
BEGIN

	ALTER TABLE [dbo].[WORKFLOW_REQ]  WITH CHECK ADD  CONSTRAINT [FK_WORKFLOW_REQ_WORKFLOW] FOREIGN KEY([WORKFLOW_ID])
	REFERENCES [dbo].[WORKFLOW] ([WORKFLOW_ID]);

END

IF NOT EXISTS (SELECT * 
               FROM sys.foreign_keys 
               WHERE object_id = OBJECT_ID(N'[dbo].[FK_WORKFLOW_REQ_WORKFLOW_REQUIREMENT]') 
               AND parent_object_id = OBJECT_ID(N'[dbo].[WORKFLOW_REQ]'))
BEGIN

	ALTER TABLE [dbo].[WORKFLOW_REQ]  WITH CHECK ADD  CONSTRAINT [FK_WORKFLOW_REQ_WORKFLOW_REQUIREMENT] FOREIGN KEY([WORKFLOW_REQUIREMENT_ID])
	REFERENCES [dbo].[WORKFLOW_REQUIREMENT] ([WORKFLOW_REQUIREMENT_ID]);

END