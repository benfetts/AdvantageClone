CREATE VIEW [dbo].[V_RPT_SEC_EMP_SUMMARY]

WITH SCHEMABINDING
AS

	SELECT 
		[ID] = NEWID(),
		[UserCode] = SU.USER_CODE,
		[CheckForUserAccess] = SU.CHECK_USER_ACCESS,
		[Employee] = SU.EMP_CODE + ' - ' + COALESCE((RTRIM(EMP.EMP_FNAME) + ' '),'') + COALESCE((EMP.EMP_MI + '. '),'') + COALESCE(EMP.EMP_LNAME,''),
		[EmployeeCode] = SU.EMP_CODE,
		[EmployeeName] = COALESCE((RTRIM(EMP.EMP_FNAME) + ' '),'') + COALESCE((EMP.EMP_MI + '. '),'') + COALESCE(EMP.EMP_LNAME,''),
		[Group] = SG.NAME + ' - ' + SG.[DESCRIPTION],
		[GroupName] = SG.NAME,
		[GroupDescription] = SG.[DESCRIPTION]
	FROM 
		dbo.SEC_USER AS SU INNER JOIN
		dbo.EMPLOYEE_CLOAK AS EMP ON EMP.EMP_CODE = SU.EMP_CODE LEFT OUTER JOIN
		dbo.SEC_GROUP_USER AS SGU ON SGU.SEC_USER_ID = SU.SEC_USER_ID LEFT OUTER JOIN
		dbo.SEC_GROUP AS SG ON SG.SEC_GROUP_ID = SGU.SEC_GROUP_ID