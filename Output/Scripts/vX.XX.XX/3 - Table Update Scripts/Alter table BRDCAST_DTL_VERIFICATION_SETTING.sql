exec advsp_sql_column_prepare 'BRDCAST_DTL_VERIFICATION_SETTING', 'VERIFY_SPOTS_POS'
GO
IF EXISTS(SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'BRDCAST_DTL_VERIFICATION_SETTING' AND COLUMN_NAME = 'VERIFY_SPOTS_POS') BEGIN

	ALTER TABLE [dbo].[BRDCAST_DTL_VERIFICATION_SETTING] DROP COLUMN [VERIFY_SPOTS_POS]
	
END
GO

exec advsp_sql_column_prepare 'BRDCAST_DTL_VERIFICATION_SETTING', 'VERIFY_SPOTS_NEG'
GO
IF EXISTS(SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'BRDCAST_DTL_VERIFICATION_SETTING' AND COLUMN_NAME = 'VERIFY_SPOTS_NEG') BEGIN

	ALTER TABLE [dbo].[BRDCAST_DTL_VERIFICATION_SETTING] DROP COLUMN [VERIFY_SPOTS_NEG]
	
END
GO

IF NOT EXISTS(SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'BRDCAST_DTL_VERIFICATION_SETTING' AND COLUMN_NAME = 'MEDIA_TYPE_CODE') BEGIN

	ALTER TABLE [dbo].[BRDCAST_DTL_VERIFICATION_SETTING] ADD [MEDIA_TYPE_CODE] [varchar](1) NULL
	
END
GO

IF NOT EXISTS(SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'BRDCAST_DTL_VERIFICATION_SETTING' AND COLUMN_NAME = 'CL_CODE') BEGIN

	ALTER TABLE [dbo].[BRDCAST_DTL_VERIFICATION_SETTING] ADD [CL_CODE] [varchar](6) NULL
	
	ALTER TABLE [dbo].[BRDCAST_DTL_VERIFICATION_SETTING]  WITH CHECK ADD  CONSTRAINT [FK_BRDCAST_DTL_VERIFICATION_SETTING_CLIENT] FOREIGN KEY([CL_CODE])
	REFERENCES [dbo].[CLIENT] ([CL_CODE])

	ALTER TABLE [dbo].[BRDCAST_DTL_VERIFICATION_SETTING] CHECK CONSTRAINT [FK_BRDCAST_DTL_VERIFICATION_SETTING_CLIENT]

END
GO

IF NOT EXISTS(SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'BRDCAST_DTL_VERIFICATION_SETTING' AND COLUMN_NAME = 'ADJACENCY_BEFORE') BEGIN

	ALTER TABLE [dbo].[BRDCAST_DTL_VERIFICATION_SETTING] ADD [ADJACENCY_BEFORE] [smallint] NOT NULL DEFAULT(0)
	
END
GO

IF NOT EXISTS(SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'BRDCAST_DTL_VERIFICATION_SETTING' AND COLUMN_NAME = 'ADJACENCY_AFTER') BEGIN

	ALTER TABLE [dbo].[BRDCAST_DTL_VERIFICATION_SETTING] ADD [ADJACENCY_AFTER] [smallint] NOT NULL DEFAULT(0)
	
END
GO

IF NOT EXISTS(SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'BRDCAST_DTL_VERIFICATION_SETTING' AND COLUMN_NAME = 'BOOKEND_MAX_SEPARATION') BEGIN

	ALTER TABLE [dbo].[BRDCAST_DTL_VERIFICATION_SETTING] ADD [BOOKEND_MAX_SEPARATION] [smallint] NOT NULL DEFAULT(3)
	
END
GO

UPDATE dbo.[BRDCAST_DTL_VERIFICATION_SETTING] SET MEDIA_TYPE_CODE = 'T' WHERE MEDIA_TYPE_CODE IS NULL
GO

INSERT INTO dbo.[BRDCAST_DTL_VERIFICATION_SETTING] (VERIFY_RATE, VERIFY_NETWORK, VERIFY_SCHEDULE, VERIFY_DAY, VERIFY_TIME, VERIFY_TIME_SEP, VERIFY_AD_NUMBER, VERIFY_LENGTH, MEDIA_TYPE_CODE, CL_CODE)
SELECT VERIFY_RATE, 0, VERIFY_SCHEDULE, VERIFY_DAY, VERIFY_TIME, VERIFY_TIME_SEP, VERIFY_AD_NUMBER, VERIFY_LENGTH, 'R', NULL
FROM dbo.[BRDCAST_DTL_VERIFICATION_SETTING]
WHERE MEDIA_TYPE_CODE = 'T'
GO

IF EXISTS(SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME = 'BRDCAST_DTL_VERIFICATION_SETTING' AND COLUMN_NAME = 'MEDIA_TYPE_CODE') BEGIN

	ALTER TABLE [dbo].[BRDCAST_DTL_VERIFICATION_SETTING] ALTER COLUMN [MEDIA_TYPE_CODE] [varchar](1) NOT NULL
	
END
GO

CREATE UNIQUE NONCLUSTERED INDEX [UI_BRDCAST_DTL_VERIFICATION_SETTING_MEDIA_TYPE_CODE_CLIENT_CODE] ON [dbo].[BRDCAST_DTL_VERIFICATION_SETTING]
(
	[MEDIA_TYPE_CODE] ASC,
	[CL_CODE] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON)
GO
