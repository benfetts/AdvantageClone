function AAGrid_SubscribeToShared(){let n=$("#aagrid").data("kendoGrid");n.bind("sort",function(n){let t=$("th[class*=static-]");t.removeClass("static-sort-desc");t.removeClass("static-sort-asc");_sortedDirection=n.sort.dir;_sortedField=n.sender.columns.find(t=>t.field===n.sort.field).title});n.bind("excelExport",function(n){n.workbook.fileName=GetExportFileName();let i=n.workbook.sheets[0],t=[],e=0,f=$("#aagrid").data("kendoGrid"),o=f.dataSource.pageSize();f.dataSource.pageSize(f.dataSource.data().length);let u=$("#aagrid").data("kendoGrid")._data;for(let n=0;n<i.rows[0].cells.length;n++)if(i.rows[0].cells[n].value=="Task Status"){i.columns[n].width=0;break}for(let n=0;n<this.columns.length;n++)if((this.columns[n].title=="Last Updated"||this.columns[n].title=="Priority"||this.columns[n].title=="Component Number"||this.columns[n].title=="CC Recipient Codes")&&!this.columns[n].hidden){for(let t=0;t<i.rows[0].cells.length;t++)i.rows[0].cells[t].value==this.columns[n].title&&(e=t);t.push({cell:this.columns[n].title,template:kendo.template(this.columns[n].template),cellIndex:e})}let r=0;for(let n=1;n<i.rows.length;n++){let f=i.rows[n];if(f.type=="data"){for(let n=0;n<t.length;n++){let i;switch(t[n].cell){case"Last Updated":i={LastUpdated:u[r].LastUpdated};f.cells[t[n].cellIndex].value=t[n].template(i);break;case"Priority":i={Priority:u[r].Priority};f.cells[t[n].cellIndex].value=t[n].template(i);break;case"Component Number":i={Job:u[r].Job,ComponentNumber:u[r].ComponentNumber};f.cells[t[n].cellIndex].value=t[n].template(i);break;case"CC Recipient Codes":i={CCEmployeeCodes:u[r].CCEmployeeCodes};f.cells[t[n].cellIndex].value=t[n].template(i)}}++r}}f.dataSource.pageSize(o)});n.bind("cellClose",function(n){let t=n.container[0].innerHTML;if(t.includes("DueDate")){let t=kendo.toString(kendo.parseDate(n.model.DueDate,"yyyy-MM-dd"),"MM/dd/yyyy");GetDateDiffAndWeekendStatus(t).then(function(i){title=getDueDateTitle(i.DateDifference,t,i.IsWeekendDate,n.model.DueDate);setTimeout(function(){n.container.find("div")[0].title=title},0)})}$("#aagrid").data("kendoGrid").refresh()});n.bind("filterMenuInit",function(n){let i=n.container.data("kendoPopup");i.bind("close",function(){$("#aagrid").focus()});var t=this.thead.find("[data-field="+n.field+"]").data("kendoFilterMultiCheck");t!==undefined&&(t.container.empty(),t.checkSource.sort({field:n.field,dir:"asc"}),t.checkSource.group(null),t.checkSource.data(t.checkSource.view().toJSON()),t.createCheckBoxes(),$("span:contains('Select All')").html("(Select All)"))});n.bind("columnReorder",function(n){let i=n.sender,u=n.oldIndex,f=n.column,t,r=!1;reorderedColumn.name=n.column.field===undefined?n.column.title:n.column.field;reorderedColumn.oldIndex=n.oldIndex;reorderedColumn.newIndex=n.newIndex;t=i.columns[reorderedColumn.newIndex].title;_staticColumns.includes(reorderedColumn.name)&&_staticColumns.includes(t)&&t!=""&&reorderedColumn.name!=""&&(r=!0);(_staticColumns.includes(reorderedColumn.name)||_staticColumns.includes(t))&&r==!1?setTimeout(function(){i.reorderColumn(u,f)},1):SaveUserColumnOrder()});n.bind("group",function(n){if(n.groups.length>0){let t="";AlertFilter.GroupBy="";for(let i=0;i<n.groups.length;i++)t=i>0?" "+n.groups[i].field:n.groups[i].field,AlertFilter.GroupBy+=t}else AlertFilter.GroupBy="";UpdateUserViewSettings(_viewType)});n.bind("columnResize",function(n){let t=n.column.field===undefined?n.column.title.replace(" ",""):n.column.field;_fromBookmarkFlag||SaveUserColumnWidth(t,n.newWidth)});n.bind("columnHide",function(n){if(saveColumnVisibility){let t={GridName:GetGridView(),Column:n.column.field,ShowHide:!1};t.Column===undefined&&(t.Column=n.column.title);$.post({url:"Inbox/SaveColumnSetting",dataType:"json",data:t}).always(function(){})}else n.preventDefault()});n.bind("columnShow",function(n){if(saveColumnVisibility){let t={GridName:GetGridView(),Column:n.column.field,ShowHide:!0};t.Column===undefined&&(t.Column=n.column.title);$.post({url:"Inbox/SaveColumnSetting",dataType:"json",data:t}).always(function(){})}else n.preventDefault()});n.bind("navigate",function(){});n.bind("dataBinding",function(n){n.items==undefined&&n.preventDefault();$("span.k-icon.k-i-more-vertical").replaceWith('<button class="k-button wv-icon-button wv-neutral"><span class="wvi wvi-table-selection-column"><\/span><\/button>');isJobJacketView?($("#dismissAllListItem").hide(),$("#completeTempCompleteListItem").hide()):($("#dismissAllListItem").show(),$("#completeTempCompleteListItem").show());_isClientPortal=="True"&&($("#completeTempCompleteListItem").hide(),$("#dismissAllListItem").hide())});n.bind("dataBound",function(n){let t=n.sender;nonReorderableColumn=n.sender.columns[0];totalpages=n.sender.pager.totalPages();n.sender.pager.options.messages.display="{2} items in "+totalpages+" page(s)";var i=n.sender.items();AreGridRowsReorderable=AlertFilter.ShowAssignmentType==="myalertassignments"||AlertFilter.ShowAssignmentType==="myalerts"||AlertFilter.ShowAssignmentType==="allalertassignments"&&$("#empMS").data("kendoMultiSelect").value().length===1?!0:!1;i.each(function(){var n=t.dataItem(this);AreGridRowsReorderable||(this.className+=" disabled");n.IsMyTaskTempComplete&&(this.className+=" strikethrough");n.IsRead||(this.className+=" not-read-bold")});$("#aagrid > div.k-pager-wrap.k-grid-pager.k-widget.k-floatwrap > span.k-pager-sizes.k-label > span > select").change(function(){let n=$("#aagrid > div.k-pager-wrap.k-grid-pager.k-widget.k-floatwrap > span.k-pager-sizes.k-label > span > span > span.k-input").html();n!==UserViewSettings.GridSize&&UpdateUserViewSettings(_viewType)});let r=t.pager.element.find(".k-pager-sizes [data-role=dropdownlist]").data("kendoDropDownList");r.bind("select",function(){pageFlag=!0});r.bind("close",function(){pageFlag=!1});$("#Search").val(AlertFilter.SearchCriteria);ManageDismissAllButton(AlertFilter.ShowAssignmentType,AlertFilter.InboxType,i.length);ManageAssignmentTypeButtons(AlertFilter.ShowAssignmentType);ManageCompleteTempCompleteButton();ManageSortedHeaderDisplay()})}function ManageSortedHeaderDisplay(){if(_sortedDirection&&_staticColumns.includes(_sortedField)){let t="th[data-title='"+_sortedField+"'].k-header",n=$(t);n.removeClass("static-sort-desc");n.removeClass("static-sort-asc");_sortedDirection=="desc"?n.addClass("static-sort-desc"):_sortedDirection=="asc"&&n.addClass("static-sort-asc")}}function CreateAAViewGrid(){let n=$("#aagrid").kendoGrid({autoBind:!1,navigatable:!0,reorderable:!0,toolbar:kendo.template($("#template").html()),excel:{filterable:!0,allPages:!0},dataSource:AAManagerDataSource,groupable:!0,sortable:!0,pageable:{refresh:!0,pageSizes:[10,15,20,50,100,200],buttonCount:5},editable:"incell",resizable:!0,filterable:{operators:{string:{contains:"Contains",doesnotcontain:"Does not contain",eq:"Is equal to",neq:"Is not equal to",startswith:"Starts with",endswith:"Ends with",isnull:"Is null",isnotnull:"Is not null",isempty:"Is empty",isnotempty:"Is not empty",isnullorempty:"Has no value",isnotnullorempty:"Has value"}}},columns:myColumns});return SetupAdditionalGridFeatures(),n}function CreateTaskViewGrid(){let n=$("#aagrid").kendoGrid({autoBind:!1,navigatable:!0,reorderable:!0,toolbar:kendo.template($("#template").html()),excel:{filterable:!0,allPages:!0},dataSource:AAManagerDataSource,groupable:!0,sortable:!0,pageable:{refresh:!0,pageSizes:[10,15,20,50,100,200],buttonCount:5},editable:"incell",resizable:!0,filterable:{operators:{string:{contains:"Contains",doesnotcontain:"Does not contain",eq:"Is equal to",neq:"Is not equal to",startswith:"Starts with",endswith:"Ends with",isnull:"Is null",isnotnull:"Is not null",isempty:"Is empty",isnotempty:"Is not empty",isnullorempty:"Has no value",isnotnullorempty:"Has value"}}},columns:myColumns});return SetupAdditionalGridFeatures(),n}function GetExportFileName(){let n="";isJobJacketView&&(n="Job "+AlertFilter.JobNumber+"-"+AlertFilter.JobComponentNumber+"_");switch(AlertFilter.ShowAssignmentType){case"unassigned":n+="Unassigned_";break;case"myalertsandassignments":n+="My_Assignments_and_Alerts_";break;case"myalerts":n+="My_Alerts_";break;case"myalertassignments":n+="My_Assignments_";break;case"allalertassignments":n+="All_Assignments_"}if(!isJobJacketView)switch(AlertFilter.InboxType){case"inbox":n+="Current";break;case"dismissed":n+="Dismissed_And_Completed";break;case"all":n+="All";break;case"drafts":n+="Drafts";break;case"task":n+="Task_List_View"}return n+("_"+kendo.toString(kendo.parseDate(new Date),"yyyyddMM_hhmmss")+".xlsx")}function SetupAdditionalGridFeatures(){let n=$("#aagrid").data("kendoGrid");n.table.kendoSortable({handler:"td:nth-child(1),.wvi.wvi-more_vertical.no-strikethrough",autoScroll:!0,disabled:".disabled",hint:hintElement,cursor:"move",placeholder:function(n){return n.clone().addClass("k-state-hover").css("opacity",.65)},filter:">tbody >tr",change:function(n){var t;let e=$("#aagrid").data("kendoGrid"),r=n.oldIndex,i=n.newIndex,u=e.dataSource._data,f="";if(r!==i){if(dataItem=e.dataSource.getByUid(n.item.data("uid")),dataItem.Order=i,dataItem.dirty=!1,r>i)for(t=r+1;t<=i;t++)u[t].Order--,u[t].dirty=!1;else for(t=r-1;t>=i;t--)u[t].Order++,u[t].dirty=!1;let o={AlertId:dataItem.AlertID,NewPosition:i,JobNumber:dataItem.JobNumber,JobComponentNumber:dataItem.ComponentNumber,TaskSequenceNumber:dataItem.TaskSequenceNumber,EmployeeCode:_EmployeeCode};AlertFilter.ShowAssignmentType==="myalertassignments"||AlertFilter.ShowAssignmentType==="myalerts"||AlertFilter.ShowAssignmentType==="allalertassignments"?(AlertFilter.ShowAssignmentType==="allalertassignments"&&(o.EmployeeCode=AlertFilter.EmployeeCode),dataItem.Category==="Task"?f="../Inbox/UpdateCardSortAssignments":(f="../Inbox/UpdateCardSortAssignments",o.JobNumber=0,o.JobComponentNumber=0,o.TaskSequenceNumber=0)):(f="../Inbox/UpdateCardSortAlerts",o.JobNumber=0,o.JobComponentNumber=0,o.TaskSequenceNumber=0);$.ajax({type:"POST",url:f,data:JSON.stringify(o),contentType:"application/json",success:function(){},error:function(n){showKendoAlert("There was an issue updating the sort sequence please contact support.<br/>Message: "+n.message)}})}else n.preventDefault(),alert("defaulted")}});$("#aagrid").find("#col-menu").kendoColumnMenu({sortable:!1,filterable:!1,columns:!0,dataSource:n.dataSource,owner:n});LoadColumnVisibilitySettings()}function priorityDropList(n,t){$('<input class="combo-40" name="'+t.field+'"/>').appendTo(n).kendoDropDownList({dataTextField:"Description",dataValueField:"Value",valuePrimitive:!0,dataSource:new kendo.data.DataSource({transport:{read:"Inbox/GetPriorities",dataType:"json"},schema:{model:{fields:{Description:{type:"string"},Value:{type:"int"}}}}})}).data("kendoDropDownList")}function dateEditor(n,t){let i;AlertFilter.IsClientPortal=="False"&&(i=$('<input id="ActiveDatePicker'+t.field+'" class="date-sm" style="width: 100%" data-bind="value:'+t.field+'" />').appendTo(n),i.kendoDatePicker({parseFormats:["MM-dd-yyyy","MM-dd-yy","MM/dd/yyyy","MM/dd/yy","MMddyyyy","MMddyy"],format:"MM/dd/yyyy",change:function(){if(t.field==="DueDate"){dueDateIsBeforeStartDate(t.model.StartDate,t.model.DueDate)===!0&&(delete t.model.dirtyFields.DueDate,t.model.DueDate="",$.isEmptyObject(t.model.dirtyFields)&&(t.model.dirty=!1,gridDirty=!1,enableSave()),showKendoAlert("Please select a Due Date greater than or equal to the Start Date: "+kendo.toString(kendo.parseDate(t.model.StartDate,"yyyy-MM-dd"),"MM/dd/yyyy")));let n=$("td#aagrid_active_cell").closest("tr").find("td[hiddentitlevalue='Task Flag']");if(t.model.DueDate){let u=kendo.toString(kendo.parseDate(t.model.DueDate,"yyyy-MM-dd"),"MM/dd/yyyy"),r,f="",i=n.find("div");n.find("div").show();GetDateDiffAndWeekendStatus(u).then(function(n){r=getDueDateClass(n.DateDifference,n.IsWeekendDate,u);f=getDueDateTitle(n.DateDifference,u,n.IsWeekendDate,t.model.DueDate);let e=`div[taskduedate-cell='${t.model.AlertID}']`;$(e).length?($(e).closest("td").removeClass("aam-standard-light-pink"),$(e).closest("td").removeClass("aam-standard-light-orange"),$(e).closest("td").removeClass("aam-standard-light-grey"),$(e).closest("td").removeClass("aam-standard-light-green"),$(e).closest("td").removeClass("aam-projected"),$(e).closest("td").addClass(r)):($("td#aagrid_active_cell").removeClass("aam-standard-light-pink"),$("td#aagrid_active_cell").removeClass("aam-standard-light-orange"),$("td#aagrid_active_cell").removeClass("aam-standard-light-grey"),$("td#aagrid_active_cell").removeClass("aam-standard-light-green"),$("td#aagrid_active_cell").removeClass("aam-projected"),$("td#aagrid_active_cell").addClass(r));i.removeClass("standard-pink");i.removeClass("standard-light-orange");i.removeClass("standard-light-grey");i.removeClass("standard-light-green");i.removeClass("projected");r=getDueDateClassFlag(n.DateDifference,n.IsWeekendDate,u);i.addClass(r);i.find("input")[0].title=f})}else n.find("div").hide(),$("td#aagrid_active_cell").removeClass("aam-standard-light-pink"),$("td#aagrid_active_cell").removeClass("aam-standard-light-orange"),$("td#aagrid_active_cell").removeClass("aam-standard-light-grey"),$("td#aagrid_active_cell").removeClass("aam-standard-light-green"),$("td#aagrid_active_cell").removeClass("aam-projected")}else startDateIsAfterDueDate(t.model.StartDate,t.model.DueDate)===!0&&t.model.set("DueDate",t.model.StartDate)}}));i.bind("focus",()=>{setTimeout(function(){$("#ActiveDatePicker"+t.field).select()},50)})}function GetDateDiffAndWeekendStatus(n){return $.ajax({url:"Inbox/GetDateDiffAndWeekendStatus",data:{DateValue:n},dataType:"json"})}function dueDateIsBeforeStartDate(n,t){let i=!1;if(n&&t){let r=new Date(n),u=new Date(t);r>u&&(i=!0)}return i}function startDateIsAfterDueDate(n,t){let i=!1;if(n&&t){let r=new Date(n),u=new Date(t);r>u&&(i=!0)}return i}function GenerateColumnDetailSettings(){$.ajax({type:"Get",url:"Inbox/GetGridColumnSettings?GridName="+GetGridView(),dataType:"json",success:function(n){myColumns=[];myColumns.push({title:"",width:35,template:"<span class='wvi wvi-more_vertical no-strikethrough'><\/span>",attributes:{style:"width: 35;"},resizable:!0,minResizableWidth:35});for(let t=0;t<n.length;t++)switch(n[t].ColumnName){case"Search":myColumns.push({title:"Search",width:n[t].ColumnWidth,template:detailsTemplate,hidden:!n[t].IsVisible,attributes:{style:"min-width: "+n[t].ColumnWidth+"px !important;",hiddenTitleValue:"Search"},headerTemplate:detailHeaderTemplate});break;case"Status":myColumns.push({title:"Status",width:n[t].ColumnWidth,template:statusTemplate,hidden:!n[t].IsVisible,attributes:{style:"min-width: "+n[t].ColumnWidth+"px;",hiddenTitleValue:"Status"},headerTemplate:statusHeaderTemplate});break;case"CategoryIcon":myColumns.push({title:"Category Icon",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,template:categoryTemplate,attributes:{style:"min-width: "+n[t].ColumnWidth+"px;",hiddenTitleValue:"Category Icon","class":"no-bold"},headerTemplate:categoryIconHeaderTemplate});break;case"Task":myColumns.push({title:"Task Status",field:"TaskStatus",filterable:!1,width:n[t].ColumnWidth,template:taskTemplate,hidden:!n[t].IsVisible,attributes:{style:"min-width: "+n[t].ColumnWidth+"px;",hiddenTitleValue:"Task Status"},headerTemplate:taskStatusHeaderTemplate});break;case"Documents":myColumns.push({title:"Documents",width:n[t].ColumnWidth,template:documentsTemplate,hidden:!n[t].IsVisible,attributes:{style:"min-width: "+n[t].ColumnWidth+"px;",hiddenTitleValue:"Documents"},headerTemplate:documentsHeaderTemplate});break;case"TaskFlag":myColumns.push({title:"Task Flag",width:n[t].ColumnWidth,template:taskFlagTemplate,hidden:!n[t].IsVisible,attributes:{style:"min-width: "+n[t].ColumnWidth+"px;",hiddenTitleValue:"Task Flag"},headerTemplate:taskFlagHeaderTemplate});break;case"AddTime":myColumns.push({title:"Add Time",width:n[t].ColumnWidth,template:addTimeTemplate,hidden:!n[t].IsVisible,attributes:{style:"min-width: "+n[t].ColumnWidth+"px;",hiddenTitleValue:"Add Time"},headerTemplate:addTimeHeaderTemplate});break;case"Stopwatch":myColumns.push({title:"Stopwatch",width:n[t].ColumnWidth,template:stopwatchTemplate,hidden:!n[t].IsVisible,attributes:{style:"min-width: "+n[t].ColumnWidth+"px;",hiddenTitleValue:"Stopwatch"},headerTemplate:stopwatchHeaderTemplate});break;case"Subject":myColumns.push({field:"Subject",title:"Subject",width:n[t].ColumnWidth,template:subjectTemplate,hidden:!n[t].IsVisible,attributes:{style:"width: "+n[t].ColumnWidth+"px; min-width: "+n[t].ColumnWidth+"px;"},filterable:{extra:!1}});break;case"UserName":myColumns.push({field:"UserName",title:"By",width:n[t].ColumnWidth,template:byTemplate,hidden:!n[t].IsVisible,attributes:{style:"width: "+n[t].ColumnWidth+"px; min-width: "+n[t].ColumnWidth+"px;"},filterable:{extra:!1}});break;case"Generated":myColumns.push({field:"GeneratedNoTime",title:"Generated",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,template:"#= kendo.toString(kendo.parseDate(Generated, 'yyyy-MM-dd'), 'MM/dd/yyyy') #",attributes:{type:"date",title:"#= kendo.toString(kendo.parseDate(Generated, 'yyyy-MM-dd'), 'MM/dd/yyyy hh:mm tt') #"},groupHeaderTemplate:generatedGroupTemplate,filterable:{ui:filterDateEditor}});break;case"LastUpdated":myColumns.push({field:"LastUpdatedNoTime",title:"Last Updated",width:n[t].ColumnWidth,template:lastUpdateTemplate,groupHeaderTemplate:lastUpdateGroupTemplate,editor:dateEditor,hidden:!n[t].IsVisible,attributes:{"class":"date-sm"},headerAttributes:{"class":"date-sm"},filterable:{ui:filterDateEditor},sortable:{compare:function(n,t){return n.LastUpdated-t.LastUpdated}}});break;case"StartDate":myColumns.push({field:"StartDate",title:"Start Date",width:n[t].ColumnWidth,template:startDateTemplate,groupHeaderTemplate:startDateGroupTemplate,editor:dateEditor,hidden:!n[t].IsVisible,attributes:{"class":"date-sm"},headerAttributes:{"class":"date-sm"},filterable:{ui:filterDateEditor}});break;case"DueDate":myColumns.push({field:"DueDate",title:"Due Date",width:n[t].ColumnWidth,template:dueDateTemplate,groupHeaderTemplate:dueDateGroupTemplate,editor:dateEditor,hidden:!n[t].IsVisible,attributes:{"class":"date-sm #= getDueDateClass(TaskDateDiff, TaskDateIsWeekend, DueDate) #"},headerAttributes:{"class":"date-sm"},filterable:{ui:filterDateEditor}});break;case"TimeDue":myColumns.push({field:"TimeDue",title:"Time Due",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"AlertStateName":myColumns.push({field:"AlertStateName",title:"State",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{multi:!0,extra:!1,itemTemplate:filterCheckboxTemplate}});break;case"Priority":myColumns.push({field:"Priority",title:"Priority",width:n[t].ColumnWidth,editor:priorityDropList,groupHeaderTemplate:priorityGroupTemplate,template:priorityTemplate,hidden:!n[t].IsVisible,filterable:{ui:function(n){n.kendoDropDownList({dataSource:new kendo.data.DataSource({transport:{read:"Inbox/GetPriorities",dataType:"json"},schema:{model:{fields:{Value:{type:"string"},Description:{type:"string"}}}}}),optionLabel:"--Select--",dataTextField:"Description",dataValueField:"Value"})},extra:!1,operators:{string:{eq:"Is equal to",neq:"Is not equal to"}}}});break;case"Category":myColumns.push({field:"Category",title:"Category",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{multi:!0,itemTemplate:filterCheckboxTemplate}});break;case"AssignedTo":myColumns.push({field:"AssignedTo",title:"Assigned To",width:n[t].ColumnWidth,template:functionAssignToTemplate,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"ClientName":myColumns.push({field:"ClientName",title:"Client",width:n[t].ColumnWidth,template:clientNameTemplate,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"Division":myColumns.push({field:"Division",title:"Division",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"Product":myColumns.push({field:"Product",title:"Product",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"CDP":myColumns.push({field:"CDP",title:"CDP Codes",sortable:!0,width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"Job":myColumns.push({field:"Job",title:"Job",template:jobTemplate,groupHeaderTemplate:jobGroupingTemplate,width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"JobNumber":myColumns.push({field:"JobNumber",title:"Job Number",template:jobNumberTemplate,groupHeaderTemplate:jobNumberGroupingTemplate,width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{ui:numericFilter,extra:!1}});break;case"JobComponent":myColumns.push({field:"JobComponent",title:"Component",template:jobComponentTemplate,groupHeaderTemplate:jobComponentGroupingTemplate,width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"ComponentNumber":myColumns.push({field:"ComponentNumber",title:"Component Number",template:componentNumberTemplate,groupHeaderTemplate:componentNumberGroupingTemplate,width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"JobComponentDetailed":myColumns.push({field:"JobComponentDetailed",title:"Job Component",template:jobComponentDetailedTemplate,groupHeaderTemplate:jobComponentDetailedGroupingTemplate,width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"JobAndComponentNumber":myColumns.push({field:"JobAndComponentNumber",title:"Job Component Number",template:jobAndComponentNumberTemplate,groupHeaderTemplate:jobAndComponentNumberGroupingTemplate,width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"JobDescription":myColumns.push({field:"JobDescription",title:"Job Description",template:jobDescriptionTemplate,groupHeaderTemplate:jobDescriptionGroupingTemplate,width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"ComponentDescription":myColumns.push({field:"ComponentDescription",title:"Component Description",template:componentDescriptionTemplate,groupHeaderTemplate:componentDescriptionGroupingTemplate,width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"ID":myColumns.push({field:"ID",title:"ID",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{ui:numericFilter,extra:!1}});break;case"SoftwareVersion":myColumns.push({field:"SoftwareVersion",title:"Version",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{multi:!0,itemTemplate:filterCheckboxTemplate}});break;case"SoftwareBuild":myColumns.push({field:"SoftwareBuild",title:"Build",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{multi:!0,itemTemplate:filterCheckboxTemplate}});break;case"Type":myColumns.push({field:"Type",title:"Type",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{multi:!0,itemTemplate:filterCheckboxTemplate}});break;case"AE":myColumns.push({field:"AE",title:"AE",width:150,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"PM":myColumns.push({field:"PM",title:"PM",width:150,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"Office":myColumns.push({field:"Office",title:"Office",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"Campaign":myColumns.push({field:"Campaign",title:"Campaign",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"Template":myColumns.push({field:"Template",title:"Template",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{multi:!0,itemTemplate:filterCheckboxTemplate}});break;case"TaskComments":myColumns.push({field:"TaskComments",title:"Task Comments",width:n[t].ColumnWidth,template:taskCommentTemplate,attributes:{style:"width: 275px; min-width: 275px; min-width: 275px"},hidden:!n[t].IsVisible,filterable:{extra:!1}});break;case"HoursAllowed":myColumns.push({field:"HoursAllowed",title:"Hours",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{ui:numericFilter,extra:!1}});break;case"TempCompleteDate":myColumns.push({field:"TempCompleteDateNoTime",title:"Temp Complete Date",width:n[t].ColumnWidth,template:tempCompleteDateTemplate,groupHeaderTemplate:tempCompleteDateGroupTemplate,hidden:!n[t].IsVisible,attributes:{"class":"date-sm"},headerAttributes:{"class":"date-sm"},filterable:{ui:filterDateEditor}});break;case"CCEmployeeCodes":myColumns.push({field:"CCEmployeeCodes",title:"CC Recipient Codes",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,template:ccRecipientCodesTemplate,filterable:{extra:!1}});break;case"CCEmployeeNames":myColumns.push({field:"CCEmployeeNames",title:"CC Recipient Names",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,template:ccRecipientNamesTemplate,filterable:{extra:!1}});break;case"Board":myColumns.push({field:"Board",title:"Board Name",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1},groupHeaderTemplate:"#= 'Board: ' + value#"});break;case"BoardState":myColumns.push({field:"BoardState",title:"Board State",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1},groupHeaderTemplate:"#= 'Board State: ' + value#"});break;case"SprintDescription":myColumns.push({field:"SprintDescription",title:"Sprint",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{extra:!1},groupHeaderTemplate:"#= 'Sprint: ' + value#"});break;case"SprintStartDate":myColumns.push({field:"SprintStartDate",title:"Sprint Start Date",width:n[t].ColumnWidth,template:sprintStartDateTemplate,groupHeaderTemplate:SprintStartDateGroupTemplate,hidden:!n[t].IsVisible,attributes:{"class":"date-sm"},headerAttributes:{"class":"date-sm"},filterable:{ui:filterDateEditor}});break;case"TaskStatusDescription":myColumns.push({title:"Task Status Description",field:"TaskStatusDescription",width:n[t].ColumnWidth,hidden:!n[t].IsVisible,filterable:{multi:!0,itemTemplate:filterCheckboxTemplate},attributes:{style:"min-width: "+n[t].ColumnWidth+"px;"}})}columnSettingsReady=!0},error:function(n){showKendoAlert(n)}})}function ccRecipientCodesTemplate(n){return n.CCEmployeeCodes!==null?n.CCEmployeeCodes:""}function ccRecipientCodesGroupTemplate(n){return"CC Recipient Codes: "+n.value}function ccRecipientNamesTemplate(n){let t="",i="",r=0;if(n.CCEmployeeNames!==null){i=n.CCEmployeeNames;for(let n=0;n<i.length;n++)i.charAt(n)!==","?t+=i.charAt(n):(r++,t+=r%2==0?"<\/BR>":", ");return t}return""}function ccRecipientNamesGroupTemplate(n){return"CC Recipient Names: "+n.value}function lastUpdateTemplate(n){let t="";return n.LastUpdated!==null&&(t=kendo.toString(kendo.parseDate(n.LastUpdated,"yyyy-MM-dd"),"MM/dd/yyyy hh:mm tt")),t}function clientNameTemplate(n){return n.ClientName!==null?n.ClientName:""}function detailHeaderTemplate(){return`<div class='icon-background header-icon-color header-column-icon'><input class='icon-image header-column-icon' type='image' id='image' src='../Images/Icons/White/256/magnifying_glass.png' title='Search'></div>`}function statusHeaderTemplate(){return`<div class='icon-background header-icon-color header-column-icon'><input class='icon-image header-column-icon' type='image' id='image' src='../Images/Icons/White/256/ok.png' title='Status'></div>`}function categoryIconHeaderTemplate(){return"<div class='wv-badge header-icon-color'><span style='color:white;' title='Category Icon'>T<\/span><\/div>"}function taskStatusHeaderTemplate(){return"<div class='wv-badge header-icon-color'><span style='color:white !important;' title='Task Status'>A<\/span><\/div>"}function documentsHeaderTemplate(){return`<div class='icon-background header-icon-color header-column-icon'><input class='icon-image header-column-icon' type='image' id='image' src='../Images/Icons/White/256/documents_empty.png' title='Document(s)'></div>`}function taskFlagHeaderTemplate(){return`<div class='icon-background header-icon-color header-column-icon'><input class='icon-image header-column-icon' type='image' id='image' src='../Images/Icons/White/256/signal_flag.png' title='Task Flag'></div>`}function addTimeHeaderTemplate(){return`<div class='icon-background header-icon-color header-column-icon'><input class='icon-image header-column-icon' type='image' id='image' src='../Images/Icons/White/256/clock.png' title='Add Time'></div>`}function stopwatchHeaderTemplate(){return`<div class='icon-background header-icon-color header-column-icon'><input class='icon-image header-column-icon' type='image' id='image' src='../Images/Icons/White/256/stopwatch.png' title='Stopwatch'></div>`}function lastUpdateGroupTemplate(n){return n.value!==null?"Last Updated: "+kendo.toString(kendo.parseDate(n.value),"MM/dd/yyyy"):"Last Updated:"}function jobTemplate(n){let t="",i="",r="",u="";return n.Job.length>0&&(i=("000000"+n.JobNumber).slice(-6),r=n.JobDescription,t=`${i} - ${r}`,u=n.ComponentNumber<1?t.length>80?`<span title='${t}'>${t.substr(0,80)}...</span>`:`<span title='${t}'>${t}</span>`:t.length>80?`<a href='javascript: void (0);' cust-role='job_cell' title='${t}' onclick='onShowJobJacketClick(${n.JobNumber},${n.ComponentNumber})'>${t.substr(0,80)}...</a>`:`<a href='javascript: void (0);' cust-role='job_cell' title='${t}' onclick='onShowJobJacketClick(${n.JobNumber},${n.ComponentNumber})'>${t}</a>`),u}function jobGroupingTemplate(n){let t="Job: ";return n.value.length>0&&(t+=`${n.value}`),t}function jobNumberTemplate(n){let t="";return n.Job.length>0&&(t=("000000"+n.JobNumber).slice(-6)),t}function jobNumberGroupingTemplate(n){let t="Job Number: ";return n.value!==0&&(t+=("000000"+n.value).slice(-6)),t}function jobComponentTemplate(n){let t="",i="";return n.Job.length>0&&(t=n.JobComponent,i=t.length>60?`<span title='${t}'>${t.substr(0,60)}...</span>`:`<span title='${t}'>${t}</span>`),i}function jobComponentGroupingTemplate(n){let t="Component: ";return n.value.length>0&&(t+=n.value),t}function componentNumberTemplate(n){let t="";return n.Job.length>0&&(t=("000"+n.ComponentNumber).slice(-3)),t}function componentNumberGroupingTemplate(n){return("000"+n.value).slice(-3)}function jobComponentDetailedTemplate(n){let i="",r="",u="",f="",t="",e="";return n.Job.length>0&&(i=("000000"+n.JobNumber).slice(-6),r=n.JobDescription,u=("000"+n.ComponentNumber).slice(-3),n.ComponentDescription!==n.JobDescription&&(f=" | "+n.ComponentDescription),t=`${i}/${u} - ${r} ${f}`,e=t.length>60?`<span title='${t}'>${t.substr(0,60)}...</span>`:`<span title='${t}'>${t}</span>`),e}function jobComponentDetailedGroupingTemplate(n){let t="Job Component: ";return n.value.length>0&&(t+=n.value),t}function jobAndComponentNumberTemplate(n){let t="";return n.Job.length>0&&(t=n.JobAndComponentNumber),t}function jobAndComponentNumberGroupingTemplate(n){return"Job Component Number: "+n.value}function jobDescriptionTemplate(n){let t="",i="";return n.Job.length>0&&(n.JobDescription!==null&&(t=n.JobDescription),i=t.length>60?`<span title='${t}'>${t.substr(0,60)}...</span>`:`<span title='${t}'>${t}</span>`),i}function jobDescriptionGroupingTemplate(n){return"Job Description: "+n.value}function componentDescriptionTemplate(n){let t="",i="";return n.Job.length>0&&(n.ComponentDescription!==null&&(t=n.ComponentDescription),i=t.length>60?`<span title='${t}'>${t.substr(0,60)}...</span>`:`<span title='${t}'>${t}</span>`),i}function componentDescriptionGroupingTemplate(n){return"Component Description: "+n.value}function generatedGroupTemplate(n){return n.value!==null?"Generated: "+kendo.toString(kendo.parseDate(n.value),"MM/dd/yyyy"):"Generated:"}function tempCompleteDateGroupTemplate(n){return n.value!==null?"Temp Complete Date: "+kendo.toString(kendo.parseDate(n.value),"MM/dd/yyyy"):"Temp Complete Date:"}function startDateGroupTemplate(n){return n.value!==null?"Start Date: "+kendo.toString(kendo.parseDate(n.value),"MM/dd/yyyy"):"Start Date:"}function dueDateGroupTemplate(n){return n.value!==null?"Due Date: "+kendo.toString(kendo.parseDate(n.value),"MM/dd/yyyy"):"Due Date:"}function SprintStartDateGroupTemplate(n){return n.value!==null?"Sprint Start Date: "+kendo.toString(kendo.parseDate(n.value),"MM/dd/yyyy"):"Sprint Start Date:"}function subjectTemplate(n){let t="",i="",r="";return n.Subject?(i=n.Subject.replace(/["']/g,""),t=n.Subject):(i="",t=""),r=t,t!==null&&t.length>80&&(t=n.Subject.substring(0,80)+"..."),`<a href='javascript: void (0);' title='${r}' onclick='onShowDetailsClick(${n.AlertID},${n.AlertCategoryID},${n.SprintID},"${i}")' cust-role='subject_cell'>${t}</a>`}function cdpTemplate(n){return n.ClientCode!==null&&n.DivisionCode!==null&&n.ProductCode!==null?n.ClientCode+" - "+n.DivisionCode+" - "+n.ProductCode:""}function categoryTemplate(n){let t="",i="";return i=getClassByPriority(n.Priority),t=n.Category.substr(0,1),`<div category-cell='${n.AlertID}' class='wv-badge ${i}' title='${n.Category}'>${t}</div>`}function onShowDetailsClick(n,t,i,r){gridDirty?promptSave().done(()=>showDetails(n,t,i,r)):showDetails(n,t,i,r)}function showDetails(n,t,i,r){let f=$("#AAView").data("kendoDropDownList"),u="Desktop_AlertView?AlertID="+n+"&SprintID="+i+"&OpenedFrom=1";OpenRadWindow(r,u)}function onShowJobJacketClick(n,t){gridDirty?promptSave().done(()=>showJobJacket(n,t)):showJobJacket(n,t)}function showJobJacket(n,t){let i="";i=`Content.aspx?From=DO&PageMode=Edit&JobNum=${n}&JobCompNum=${t}&NewComp=0&aamsat=${AlertFilter.ShowAssignmentType}`;OpenRadWindow("Job Jacket",i)}function onAssignToClick(n,t){gridDirty?promptSave().done(()=>ProcessAssignToClick(n,t)):ProcessAssignToClick(n,t)}function ProcessAssignToClick(n,t){var i=n;openRadWindowWithEvents(t,i,500,500,!1,function(){gridDirty=!1;enableSave();saveGridChanges();refreshPage("")})}function openRadWindowWithEvents(n,t,i,r,u,f){OpenRadWindow(n,t,i,r,u,f)}function documentsTemplate(n){return n.AttachmentCount>=1?n.AttachmentCount===1?"<div class='icon-background background-color-sidebar standard-light-green'><input style='cursor:default !important;' class='icon-image' type='image' id='image' src='../Images/Icons/White/256/documents_empty.png' title='"+n.AttachmentCount+" attachment'><\/div>":"<div class='icon-background background-color-sidebar standard-light-green'><input style='cursor:default !important;' class='icon-image' type='image' id='image' src='../Images/Icons/White/256/documents_empty.png' title='"+n.AttachmentCount+" attachments'><\/div>":"<div class='icon-background background-color-sidebar standard-pink'><input style='cursor:default !important;' class='icon-image' type='image' id='image' src='../Images/Icons/White/256/documents_empty.png' title='No attachments'><\/div>"}function byTemplate(n){let t="";return n.UserName!==null&&n.UserName.length>0&&(t=n.UserName),t}function startDateTemplate(n){return n.StartDate?`<div startDate-cell='${n.AlertID}' title='${kendo.toString(kendo.parseDate(n.StartDate),"MM/dd/yyyy")}'>${kendo.toString(kendo.parseDate(n.StartDate),"MM/dd/yyyy")}</div>`:`<div startDate-cell='${n.AlertID}'></div>`}function tempCompleteDateTemplate(n){return n.TempCompleteDate?kendo.toString(kendo.parseDate(n.TempCompleteDate),"MM/dd/yyyy"):""}function sprintStartDateTemplate(n){return n.SprintStartDate?kendo.toString(kendo.parseDate(n.SprintStartDate),"MM/dd/yyyy"):""}function taskFlagTemplate(n){let t="";return t=kendo.toString(kendo.parseDate(n.DueDate),"MM/dd/yyyy"),n.DueDate!==null&&n.Category==="Task"?`<div taskflag-cell='${n.AlertID}' class='icon-background background-color-sidebar ${getDueDateClassFlag(n.TaskDateDiff,n.TaskDateIsWeekend,n.DueDate)}'><input class='icon-image' type='image' id='image' src='../Images/Icons/White/256/signal_flag.png' style='cursor:default !important;' title='${getDueDateTitle(n.TaskDateDiff,t,n.TaskDateIsWeekend,n.DueDate)}'></div>`:""}function taskTempCompleteTemplate(n){let t="",i="",r="";return(n.IsMyTaskTempComplete&&!n.IsOwnerAssignmentAlert?(t="../Images/Icons/white/256/delete.png",i="Mark Task Not Temp complete",r="standard-pink"):n.IsCC?(t="../Images/Icons/white/256/garbage.png",i="Dismiss Alert",r="standard-light-green"):(t="../Images/Icons/White/256/ok.png",i="Mark Task Temp Complete",r="standard-light-green"),!n.IsMyTask)?"":`<div taskTempComp-cell='${n.AlertID}' class='icon-background background-color-sidebar ${r}'>
                            <input class='icon-image' type='image' id='image' src='${t}' title='${i}' 
                            onclick='processTempComplete(${n.IsMyTaskTempComplete}, ${n.JobNumber}, ${n.ComponentNumber}, ${n.TaskSequenceNumber});'></div>`}function processTempComplete(n,t,i,r){let u={IsTaskTempComplete:n,JobNumber:t,JobComponentNumber:i,TaskSequenceNumber:r};$.ajax({type:"POST",url:"Inbox/ProcessTempComplete",data:JSON.stringify(u),contentType:"application/json",success:function(n){n.Message.length>0&&showKendoAlert(n.Message);let t=$("#aagrid").data("kendoGrid");t.dataSource.read()},error:function(n){console.log("An error occurred during update: "+n.message)}})}function dueDateTemplate(n){let t="",i="";return n.DueDate?(t=kendo.toString(kendo.parseDate(n.DueDate),"MM/dd/yyyy"),i=n.AlertCategoryID==71?`<div taskDueDate-cell='${n.AlertID}' title='${getDueDateTitle(n.TaskDateDiff,t,n.TaskDateIsWeekend,n.DueDate)}'>${t}</div>`:`<div taskDueDate-cell='${n.AlertID}' title='${getDueDateTitle(n.TaskDateDiff,t,n.TaskDateIsWeekend,n.DueDate)}'>${t}</div>`):i=`<div taskDueDate-cell='${n.AlertID}'></div>`,i}function getDueDateTitle(n,t,i,r){let u="";return r!==null&&(u=n==0?"Task is due today!":n<0?`Task is overdue ${n*-1} day(s) on ${t}`:n>0&&i?"Due date is on a weekend!":`Due in ${n} days(s) on ${t}`),u}function getDueDateClass(n,t,i){let r="";if(i!==null){if(i.length<1)return r;r=n<0?"aam-standard-light-pink":n==0?"aam-standard-light-orange":t&&n>0?"aam-standard-light-grey":n>0&&n<=7?"aam-projected":"aam-standard-light-green"}return r}function getDueDateClassFlag(n,t,i){let r="";if(i!==null){if(i.length<1)return r;r=n<0?"standard-pink":n==0?"standard-light-orange":t&&n>0?"standard-light-grey":n>0&&n<=7?"projected":"standard-light-green"}return r}function detailsTemplate(n){let i=getDetailTitleDescriptionByPriority(n.Priority),r=getClassByPriority(n.Priority),t="";return t=n.Subject?n.Subject.replace(/["']/g,""):"",n.IsRead==1?`<div priority-cell='${n.AlertID}' class='icon-background background-color-sidebar ${r}'><input class='icon-image' type='image' id='image' src='../Images/Icons/White/256/magnifying_glass.png' onclick='onShowDetailsClick(${n.AlertID},${n.AlertCategoryID},${n.SprintID},"${t}")' title='${i}'></div>`:`<div priority-cell='${n.AlertID}' class='icon-background background-color-sidebar ${r}'><input class='icon-image' type='image' id='image' src='../Images/Icons/White/256/magnifying_glass.png' onclick='onShowDetailsClick(${n.AlertID},${n.AlertCategoryID},${n.SprintID},"${t}")' title='${i}'></div>`}function statusTemplate(n){let i="",r={},t=0,u="";return i=getStatusState(n),n.Category!="Task"||n.IsOwnerAssignmentAlert||GetViewValue()=="dismissed"?(n.Category=="Task"&&GetViewValue()=="dismissed"&&i=="reOpen"?t=3:AlertFilter.ShowAssignmentType==="myalertsandassignments"?(n.IsMyAssignment===!0||n.IsMyTask===!0||n.IsTaskAssignment===!0)&&n.IsOwnerAssignmentAlert===!1&&(t=1):AlertFilter.ShowAssignmentType==="myalertassignments"?t=1:AlertFilter.ShowAssignmentType==="allalertassignments"?(n.IsMyAssignment===!0||n.IsMyTask===!0)&&(t=1):t=n.IsDraft===!0?2:0,AlertFilter.IsClientPortal=="True"&&(i=="complete"||i=="reOpen")&&(i="dismiss"),r=getStatusDetail(i,n.Category),t==3&&(r.title="Re-open Assignment"),r.icon==""&&(u=""),u=`<div class='icon-background background-color-sidebar ${r.class}'><input class='icon-image' type='image' id='image' 
                    src='${r.icon}' onclick="alertAction(${n.AlertID},${n.SprintID},'${n.Category}', ${t})" 
                    title='${r.title}'></div>`):u=taskTempCompleteTemplate(n),u}function taskTemplate(n){let t=n.TaskStatus,e=n.Priority,i="",r="",u="",o=n.AlertID,f="";return categoryText=n.Category.substr(0,1),n.IsTaskAssignment==!0&&(t==null&&(t="P"),t.length>0&&(i=t=="A"?"standard-light-green":"projected"),i=="projected"&&(f="color: #000;"),r=getTaskTitleDescription(t,e),u=`<div task-cell='${o}' class='wv-badge ${i}' title='${r}' style='${f}'>${t}</div>`),u}function taskCommentTemplate(n){let t="";return t=n.TaskComments,t.length>40&&(t=n.TaskComments.substring(0,40)+"..."),"<div title='"+n.TaskComments+"'>"+t+"<\/div>"}function functionAssignToTemplate(n){let t="";if(n.AssignedTo.length==0)t="";else{let u="",i="";if(AlertFilter.IsClientPortal!="False"||n.IsStandardAlert)t=n.AssignedTo;else{if(u=n.AssignedToLinkAddress.includes("TrafficSchedule_TaskEmployees")?"Employees":n.AssignedToLinkAddress.includes("Desktop_Reassign")?"Assignment":n.Subject,n&&n.AlertCategoryID&&n.AlertCategoryID==79)try{try{n.SprintID&&n.SprintID!=undefined&&n.SprintID!=null||(n.SprintID=0)}catch(i){}var r="Desktop_AlertView?AlertID="+n.AlertID+"&SprintID="+n.SprintID+"&OpenedFrom=1";i="OpenRadWindow('"+n.Subject+"', '"+r+"')"}catch(i){console.log("error?",i)}else i="onAssignToClick('"+n.AssignedToLinkAddress+"', '"+u+"')";t='<a href="javascript:void(0);" title="'+n.AssignedToTitle+'" onclick="'+i+'" cust-role="assigned_to_cell">'+n.AssignedTo+"<\/a>"}}return t}function priorityTemplate(n){return n.Priority?n.Priority==3?"--":n.Priority==1?"HH":n.Priority==2?"H":n.Priority==4?"L":n.Priority==5?"LL":"":""}function priorityGroupTemplate(n){return n.value?n.value==3?"Priority: Normal":n.value==1?"Priority: Highest":n.value==2?"Priority: High":n.value==4?"Priority: Low":n.value==5?"Priority: Lowest":"":""}function getStatusDetail(n,t){let i={title:"",icon:"","class":"",enabled:!0};switch(n){case"dismiss":i.title="Dismiss Alert";i.icon="../Images/Icons/White/256/garbage.png";i.class="standard-light-green";break;case"undismiss":i.title="Un-dismiss Alert";i.icon="../Images/Icons/White/256/garbage_full.png";i.class="standard-amber";break;case"complete":t=="Task"?(i.title="Mark Not Complete",i.icon="../Images/Icons/White/256/delete.png",i.class="standard-pink"):(i.title="Complete",i.icon="../Images/Icons/White/256/ok.png",i.class="standard-light-green");break;case"reOpen":t=="Task"?(i.title="Not Complete",i.icon="../Images/Icons/White/256/check.png",i.class="standard-amber"):(i.title="Re-open Assignment",i.icon="../Images/Icons/White/256/ok.png",i.class="standard-amber");break;case"deleteDraft":i.title="Delete Draft";i.icon="../Images/Icons/White/256/delete.png";i.class="standard-pink";break;case"hide":i.title="";i.icon="../Images/spacer.gif";i.class="display-none";i.enabled=!1}return i}function getStatusState(n){let t="";if(isJobJacketView)switch(AlertFilter.ShowAssignmentType){case"myalerts":t=n.IsDismissed?"undismiss":"dismiss";break;case"myalertassignments":t=n.Category=="task"?n.IsMyTaskTempComplete?"reOpen":"complete":n.AssignedToEmpCode==_EmployeeCode&&n.AssignedTo.toLowerCase()=="completed"||n.IsMyAssignment&&n.AssignedTo.toLowerCase()=="completed"?"reOpen":n.AssignedToEmpCode==_EmployeeCode&&n.AssignedTo.toLowerCase()!=="completed"||n.IsMyAssignment&&n.AssignedTo.toLowerCase()!=="completed"&&!n.IsMyAssignmentCompleted?"complete":n.AssignedToEmpCode==_EmployeeCode&&n.AssignedTo.toLowerCase()!=="completed"||n.IsMyAssignment&&n.AssignedTo.toLowerCase()!=="completed"&&n.IsMyAssignmentCompleted?"reOpen":"hide";break;case"myalertsandassignments":t=(n.IsRouted||n.Category==="task"||n.IsWorkItem)&&(!n.IsCC||n.IsOwnerAssignmentAlert!==!0)?n.Category=="task"?n.IsMyTaskTempComplete?"reOpen":"complete":n.AssignedToEmpCode==_EmployeeCode||n.IsMyAssignment&&!n.IsMyAssignmentCompleted?"complete":n.AssignedToEmpCode==_EmployeeCode&&n.AssignedTo.toLowerCase()=="completed"||n.IsMyAssignment&&n.AssignedTo.toLowerCase()=="completed"?"reOpen":n.IsCC?"dismiss":"hide":n.IsDismissed?"undismiss":"dismiss";break;case"allalertassignments":t=n.AssignedToEmpCode==_EmployeeCode||n.IsMyAssignment&&!n.IsMyAssignmentCompleted?"complete":n.AssignedToEmpCode==_EmployeeCode||n.IsMyAssignment&&n.IsMyAssignmentCompleted?"reOpen":"hide"}else if(AlertFilter.ShowAssignmentType=="unassigned")t="hide";else switch(GetViewValue()){case"inbox":switch(AlertFilter.ShowAssignmentType){case"myalerts":t="dismiss";break;case"myalertassignments":t=n.Category=="task"?n.IsMyTaskTempComplete?"reOpen":"complete":"complete";break;case"myalertsandassignments":t=(n.IsRouted||n.Category==="task"||n.IsWorkItem)&&(!n.IsCC||n.IsOwnerAssignmentAlert!==!0)?n.Category=="task"?n.IsMyTaskTempComplete?"reOpen":"complete":n.AssignedToEmpCode==_EmployeeCode||n.IsMyAssignment?"complete":"dismiss":"dismiss";break;case"allalertassignments":t=n.AssignedToEmpCode==_EmployeeCode||n.IsMyAssignment&&!n.IsMyAssignmentCompleted?"complete":"hide"}break;case"dismissed":switch(AlertFilter.ShowAssignmentType){case"myalerts":t="undismiss";break;case"myalertassignments":t="reOpen";break;case"myalertsandassignments":t=n.IsDismissed?"undismiss":n.AssignedToEmpCode==_EmployeeCode||n.IsMyAssignment?"reOpen":n.IsWorkItem?"reOpen":"undismiss";break;case"allalertassignments":t=n.AssignedToEmpCode==_EmployeeCode&&(n.IsCurrentAssignee||n.AssignedTo.toLowerCase()=="completed")?"reOpen":"hide"}break;case"all":switch(AlertFilter.ShowAssignmentType){case"myalerts":t=n.IsDismissed?"undismiss":"dismiss";break;case"myalertassignments":n.IsRouted&&(t=n.AssignedToEmpCode==_EmployeeCode&&n.AssignedTo.toLowerCase()=="completed"?"reOpen":n.AssignedToEmpCode==_EmployeeCode&&n.AssignedTo.toLowerCase()!=="completed"?"complete":"hide");break;case"myalertsandassignments":t=n.IsRouted?n.AssignedToEmpCode==_EmployeeCode&&n.AssignedTo.toLowerCase()=="completed"?"reOpen":n.AssignedToEmpCode==_EmployeeCode&&n.AssignedTo.toLowerCase()!=="completed"?"complete":"hide":n.IsDismissed?"undismiss":"dismiss";break;case"allalertassignments":t=n.AssignedToEmpCode==_EmployeeCode&&(n.IsCurrentAssignee||n.AssignedTo.toLowerCase()=="completed")?"reOpen":n.AssignedToEmpCode==_EmployeeCode&&n.AssignedTo.toLowerCase()!=="completed"?"complete":"hide"}break;case"drafts":t="deleteDraft";break;case"task":switch(AlertFilter.ShowAssignmentType){case"myalerts":t="dismiss";break;case"myalertassignments":t=n.Category=="task"?n.IsMyTaskTempComplete?"reOpen":"complete":"complete";break;case"myalertsandassignments":t=(n.IsRouted||n.Category==="task"||n.IsWorkItem)&&(!n.IsCC||n.IsOwnerAssignmentAlert!==!0)?n.Category=="task"?n.IsMyTaskTempComplete?"reOpen":"complete":n.AssignedToEmpCode==_EmployeeCode||n.IsMyAssignment?"complete":"dismiss":"dismiss";break;case"allalertassignments":t=n.AssignedToEmpCode==_EmployeeCode||n.IsMyAssignment&&!n.IsMyAssignmentCompleted?"complete":"hide"}}return t}function addTimeTemplate(n){let t="";return(n.Category=="Task"||n.JobNumber>0&&n.ComponentNumber>0)&&(t=`<div stopwatch-cell='${n.AlertID}' class='icon-background background-color-sidebar standard-light-green'>
                            <input class='icon-image' type='image' id='image' src='../Images/Icons/White/256/clock.png' title='Add Time' 
                            onclick="processAddTimeClick(${n.AlertID}, ${n.JobNumber}, ${n.ComponentNumber}, ${n.TaskSequenceNumber});"></div>`),t}function processAddTimeClick(n,t,i,r){let u=`Employee/Timesheet/Entry?a=${n}&emp=${_EmployeeCode}&j=${t}&jc=${i}&s=${r}`;openRadWindowWithEvents("Add Time",u,600,600,!1)}function stopwatchTemplate(n){return n.Category=="Task"||n.JobNumber>0&&n.ComponentNumber>0?`<div stopwatch-cell='${n.AlertID}' class='icon-background background-color-sidebar standard-light-green'>
                            <input class='icon-image' type='image' id='image' src='../Images/Icons/White/256/stopwatch.png' title='Click to start Stopwatch' 
                            onclick="processStopwatchClick(${n.AlertID}, ${n.JobNumber}, ${n.ComponentNumber}, ${n.TaskSequenceNumber});"></div>`:""}function processStopwatchClick(n,t,i,r){r==null&&(r=-1);let u={EmployeeCode:_EmployeeCode};$.post({url:"../Employee/Timesheet/HasStopwatch",dataType:"json",data:JSON.stringify(u)}).always(function(f){f&&(f.StopwatchIsRunning===!0?showKendoConfirm("There is a stopwatch already running.\nStop it and start a new stopwatch?").done(function(){$.post({url:"../Employee/Timesheet/StopStopwatch",dataType:"json",data:u}).always(function(u){u&&startStopWatch(n,t,i,r)})}).fail(function(){return!1}):startStopWatch(n,t,i,r))})}function startStopWatch(n,t,i,r){let u="Timesheet Stopwatch",f="Timesheet_Stopwatch.aspx",e={AlertID:n,JobNumber:t,JobComponentNumber:i,TaskSequenceNumber:r};$.ajax({type:"POST",url:"Inbox/StopWatchStart",data:JSON.stringify(e),contentType:"application/json",success:function(n){n.OpenStopWatch?openRadWindowWithEvents(u,f,475,500,!1):showKendoAlert(n.ErrorMessage)},error:function(){showKendoAlert("An error occurred while attempting to start the stopwatch, please contact support.")}})}function columnReset(n){ProcessColumnReset(n)}function CheckColumnSettingsReadyFlagAndReloadGrid(){columnSettingsReady===!1?setTimeout(CheckColumnSettingsReadyFlagAndReloadGrid,250):ReloadGrid()}function BuildAAViewDropDown(){userViewSettingsReady===!1?setTimeout(BuildAAViewDropDown,250):$("#AAView").kendoDropDownList({dataTextField:"Description",dataValueField:"Code",dataSource:new kendo.data.DataSource({transport:{read:{url:"Inbox/GetFolders",dataType:"json"}}}),dataBound:function(){$("#AAView").data("kendoDropDownList").select(GetViewIndex(UserViewSettings.InboxType))},change:function(){onInboxViewChange()}}).data("kendoDropDownList")}function ProcessColumnReset(n){let t="",i="";columnSettingsReady=!1;t=GetGridView();i=n==="width"?"Inbox/ResetGridColumnWidths":"Inbox/ResetGridColumnOrder";$.ajax({type:"POST",url:i,data:{GridName:t},success:function(){closeAllPopups();DestroyGrid();LoadUserColumnSettings();SetDateFilters(GetViewValue());CheckColumnSettingsReadyFlagAndReloadGrid()},error:function(){closeAllPopups();showKendoAlert(`An error occurred while resetting the grid column ${n}, please contact support.`)}})}$("#aagrid").change(function(n){n.target.id!=="Search"&&(pageFlag||(gridDirty=!0,enableSave()))});