function subjectTemplate(n){let t="";return t=n.Subject,t.length>40&&(t=n.Subject.substring(0,40)+"..."),`<a href='javascript: void (0);' title='${n.Subject}' onclick='onShowDetailsClick(${n.AlertID},${n.AlertCategoryID},${n.SprintID},"${n.Subject}")'>${t}</a>`}function onShowDetailsClick(n,t,i,r){gridDirty?promptSave().done(()=>showDetails(n,t,i,r)):showDetails(n,t,i,r)}function showDetails(n,t,i,r){let u=$("#AAView").data("kendoDropDownList");if(u.value()==="Drafts"){let t="Desktop_AlertView?AlertID="+n+"&SprintID="+i;OpenRadWindow(r,t)}else if(t!=38){let t="Desktop_AlertView?AlertID="+n+"&SprintID="+i;OpenRadWindow(r,t)}}function onShowJobJacketClick(n,t){gridDirty?promptSave().done(()=>showJobJacket(n,t)):showJobJacket(n,t)}function showJobJacket(n,t){let i="";i=`Content.aspx?From=DO&PageMode=Edit&JobNum=${n}&JobCompNum=${t}&NewComp=0`;OpenRadWindow("Job Jacket",i)}function gridDataChanged(){pageFlag||(gridDirty=!0,enableSave())}function onAssignToClick(n,t){gridDirty?promptSave().done(()=>ProcessAssignToClick(n,t)):ProcessAssignToClick(n,t)}function ProcessAssignToClick(n,t){var i=n;openRadWindowWithEvents(t,i,500,500,!1,function(){gridDirty=!1;enableSave();saveGridChanges();refreshPage()})}function openRadWindowWithEvents(n,t,i,r,u,f){OpenRadWindow(n,t,i,r,u,f)}function documentsTemplate(n){return n.AttachmentCount>=1?n.AttachmentCount===1?"<div class='icon-background background-color-sidebar standard-light-green'><input style='cursor:default !important;' class='icon-image' type='image' id='image' src='../Images/Icons/White/256/documents_empty.png' title='"+n.AttachmentCount+" attachment'><\/div>":"<div class='icon-background background-color-sidebar standard-light-green'><input style='cursor:default !important;' class='icon-image' type='image' id='image' src='../Images/Icons/White/256/documents_empty.png' title='"+n.AttachmentCount+" attachments'><\/div>":"<div class='icon-background background-color-sidebar standard-pink'><input style='cursor:default !important;' class='icon-image' type='image' id='image' src='../Images/Icons/White/256/documents_empty.png' title='No attachments'><\/div>"}function startDateTemplate(n){return n.StartDate?kendo.toString(kendo.parseDate(n.StartDate),"MM/dd/yyyy"):""}function taskFlagTemplate(n){let t="",i="";return n.Category=="Task"?(i=kendo.toString(kendo.parseDate(n.DueDate),"MM/dd/yyyy"),t=`<div taskflag-cell='${n.AlertID}' class='icon-background background-color-sidebar ${getDueDateClass(n.TaskDateDiff,!0,n.AlertCategoryID,n.TaskDateDiffIsWeekend)}'><input class='icon-image' type='image' id='image' src='../Images/Icons/White/256/signal_flag.png' style='cursor:default !important;' title='${getDueDateTitle(n.TaskDateDiff,i,n.TaskDateDiffIsWeekend)}'></div>`):t="",t}function taskTempCompleteTemplate(n){let t="",i="",r="";return n.IsMyTaskTempComplete?(t="../Images/Icons/white/256/delete.png",i="Mark not completed",r="standard-pink"):(t="../Images/Icons/White/256/ok.png",i="Mark temp complete",r="standard-light-green"),`<div taskTempComp-cell='${n.AlertID}' class='icon-background background-color-sidebar ${r}'>
                            <input class='icon-image' type='image' id='image' src='${t}' title='${i}' 
                            onclick='processTempComplete(${n.IsMyTaskTempComplete}, ${n.JobNumber}, ${n.JobComponentNumber}, ${n.TaskSequenceNumber});'></div>`}function processTempComplete(n,t,i,r){let u={IsTaskTempComplete:n,JobNumber:t,JobComponentNumber:i,TaskSequenceNumber:r};$.ajax({type:"POST",url:"Inbox/ProcessTempComplete",data:JSON.stringify(u),contentType:"application/json",success:function(n){n.Message.length>0&&showKendoAlert(n.Message);let t=$("#aagrid").data("kendoGrid");t.dataSource.read()},error:function(n){console.log("An error occurred during update: "+n.message)}})}function dueDateTemplate(n){let t="",i="";return n.DueDate&&(t=kendo.toString(kendo.parseDate(n.DueDate),"MM/dd/yyyy"),i=n.AlertCategoryID==71?`<div taskDueDate-cell='${n.AlertID}' title='${getDueDateTitle(n.TaskDateDiff,t,n.TaskDateDiffIsWeekend)}'>${t} </div>`:t),i}function getDueDateTitle(n,t,i){return n==0?"Task is due today!":n<0?`Task is overdue ${n*-1} day(s) on ${t}`:n>0&&i?"Due data is on a weekend!":`Due in ${n} days(s) on ${t}`}function getDueDateClass(n,t,i,r){let u="";if(!t&&(n>8||n==null)){u="";return}return i==71&&(u=n==0?"standard-light-orange":n<0?"standard-pink":r&&n>0?"standard-light-grey":n>0&&n<9?"standard-yellow":"standard-light-green"),u}function jobTemplate(n){let t="",i="",r="",u="";return n.JobNumber!==0&&(i=("000000"+n.JobNumber).slice(-6),r=n.TaskJobDescription,t=`${i} - ${r}`,u=t.length>40?`<span title='${t}'>${t.substr(0,40)}...</span>`:`<span title='${t}'>${t}</span>`),u}function jobComponentTemplate(n){let t="",u="",f="",e="",i="",r="";if(n.JobNumber!==0&&(u=("000000"+n.JobNumber).slice(-6),f=("000"+n.JobComponentNumber).slice(-3),e=n.TaskJobDescription,t=`${u}/${f} - ${e} | ${n.ClientName}`,i=t.length>40?t.substr(0,40)+"...":t),n.Category=="Task"||n.JobNumber>0&&n.JobComponentNumber>0){let u="",f="";u=n.JobNumber;f=n.JobComponentNumber;r=`<a href='javascript: void (0);' title='${t}' onclick='onShowJobJacketClick(${u},${f})'>${i}</a>`}else r=`<span title='${t}'>${i}</span>`;return r}function detailsTemplate(n){let t=getDetailTitleDescriptionByPriority(n.Priority),i=getClassByPriority(n.Priority);return n.IsRead==1?`<div priority-cell='${n.AlertID}' class='icon-background background-color-sidebar ${i}'><input class='icon-image' type='image' id='image' src='../Images/Icons/White/256/mail_open.png' onclick='onShowDetailsClick(${n.AlertID},${n.AlertCategoryID},${n.SprintID},"${n.Subject}")' title='${t}'></div>`:`<div priority-cell='${n.AlertID}' class='icon-background background-color-sidebar ${i}'><input class='icon-image' type='image' id='image' src='../Images/Icons/White/256/mail.png' onclick='onShowDetailsClick(${n.AlertID},${n.AlertCategoryID},${n.SprintID},"${n.Subject}")' title='${t}'></div>`}function statusTemplate(n){let u="",t={},r=!1,i="";return n.Category=="Task"?i=taskTempCompleteTemplate(n):(show=="myalertsandassignments"?(n.IsMyAssignment===!0||n.IsMyTask===!0||n.IsTaskAssignment===!0)&&(r=1):r=show=="myalertassignments"?1:0,u=getStatusState(n),t=getStatusDetail(u,n.Category),t.icon==""&&(i=""),i=`<div class='icon-background background-color-sidebar ${t.class}'><input class='icon-image' type='image' id='image' 
                    src='${t.icon}' onclick="alertAction(${n.AlertID},${n.SprintID},'${n.Category}', ${r})" 
                    title='${t.title}'></div>`),i}function taskTemplate(n){let t=n.TaskStatus,r=n.Priority,u="",f="",i="",e=n.AlertID;return n.IsTaskAssignment==!0&&(t.length>0&&(u=t=="H"?getClassByPriority("2"):t=="L"?getClassByPriority("4"):getClassByPriority(r)),f=getTaskTitleDescription(t,r),i=`<div task-cell='${e}' class='icon-background background-color-sidebar ${u}'>`,i+=`<input class='icon-image' style='cursor:default !important;' type='image' id='image'`,i+=`src = '../Images/Icons/White/256/progress_bar.png' title = '${f}' ></div >`),i}function taskCommentTemplate(n){let t="";return t=n.TaskComments,t.length>40&&(t=n.TaskComments.substring(0,40)+"..."),"<div title='"+n.TaskComments+"'>"+t+"<\/div>"}function taskClientTemplate(n){return n.ClientCode&&n.DivisionCode&&n.ProductCode?`${n.ClientCode}/${n.DivisionCode}/${n.ProductCode}`:""}function functionAssignToTemplate(n){let t="";if(n.AssignedTo.length==0)t="";else{let i="",r="";i=n.AssignedToLinkAddress.includes("TrafficSchedule_TaskEmployees")?"Employees":n.AssignedToLinkAddress.includes("Desktop_Reassign")?"Assignment":n.Subject;r="onAssignToClick('"+n.AssignedToLinkAddress+"', '"+i+"')";t='<a href="javascript:void(0);" title="'+n.AssignedToTitle+'" onclick="'+r+'">'+n.AssignedTo+"<\/a>"}return t}function AlertLevelTemplate(n){return n.Level==null||n.Level.length<=0?"":n.AlertLevelText==null||n.AlertLevelText.length<=0?"<span title='No Description Available'>"+n.Level+"<\/span>":"<span title='"+n.AlertLevelText+"'>"+n.Level+"<\/span>"}function priorityTemplate(n){return n.Priority?n.Priority=="3"?"--":n.Priority=="1"?"HH":n.Priority=="2"?"H":n.Priority=="4"?"L":n.Priority=="5"?"LL":"":""}function getStatusDetail(n,t){let i={title:"",icon:"","class":"",enabled:!0};switch(n){case"dismiss":i.title="Dismiss Alert";i.icon="../Images/Icons/White/256/garbage.png";i.class="standard-light-green";break;case"undismiss":i.title="Un-dismiss Alert";i.icon="../Images/Icons/White/256/garbage_full.png";i.class="standard-amber";break;case"complete":t=="task"?(i.title="Mark Not Complete",i.icon="../Images/Icons/White/256/delete.png",i.class="standard-pink"):(i.title="Complete",i.icon="../Images/Icons/White/256/ok.png",i.class="standard-light-green");break;case"reOpen":t=="task"?(i.title="Mark Temp Complete",i.icon="../Images/Icons/White/256/check.png",i.class=""):(i.title="Re-open Assignment",i.icon="../Images/Icons/White/256/ok.png",i.class="standard-amber");break;case"deleteDraft":i.title="Delete Draft";i.icon="../Images/Icons/White/256/delete.png";i.class="standard-pink";break;case"hide":i.title="";i.icon="../Images/spacer.gif";i.class="display-none";i.enabled=!1}return i}function getStatusState(n){let t="";if(isJobJacketView)n.AssignedToEmpCode==_EmployeeCode?(n.IsRouted&&n.IsMyAssignment&&(t=n.AssignedTo.toLowerCase()=="completed"?"reOpen":"complete"),t==""&&(t=n.IsTaskTempComplete?"reOpen":"complete")):t="hide";else if(show=="unassigned")t="hide";else switch(GetViewValue()){case"inbox":switch(show){case"myalerts":t="dismiss";break;case"myalertassignments":t=n.Category=="task"?n.IsMyTaskTempComplete?"reOpen":"complete":"complete";break;case"myalertsandassignments":t=(n.IsRouted||n.Category==="task"||n.IsWorkItem)&&!n.IsCC?n.Category=="task"?n.IsMyTaskTempComplete?"reOpen":"complete":n.AssignedToEmpCode==_EmployeeCode&&n.IsCurrentAssignee?"complete":n.IsWorkItem?"complete":"dismiss":"dismiss";break;case"allalertassignments":t=n.AssignedToEmpCode==_EmployeeCode?"complete":"hide"}break;case"dismissed":switch(show){case"myalerts":t="undismiss";break;case"myalertassignments":t="reOpen";case"myalertsandassignments":t=n.IsRouted?n.AssignedToEmpCode==_EmployeeCode&&n.IsCurrentAssignee?n.IsCC?"undismiss":"reOpen":n.IsWorkItem?"reOpen":"undismiss":"undismiss";break;case"allalertassignments":t=n.AssignedToEmpCode==_EmployeeCode&&(n.IsCurrentAssignee||n.AssignedTo.toLowerCase()=="completed")?"reOpen":"hide"}break;case"all":t=n.IsRouted?n.AssignedToEmpCode==_EmployeeCode&&n.AssignedTo.toLowerCase()=="completed"?"reOpen":n.AssignedToEmpCode==_EmployeeCode&&n.AssignedTo.toLowerCase()!=="completed"?"complete":"hide":n.IsDismissed?"undismiss":"dismiss";break;case"drafts":t="deleteDraft";break;case"task":t=n.IsMyTaskTempComplete?"reOpen":"complete"}return t}function addTimeTemplate(n){let t="";return(n.Category=="Task"||n.JobNumber>0&&n.JobComponentNumber>0)&&(t=`<div stopwatch-cell='${n.AlertID}' class='icon-background background-color-sidebar standard-light-green'>
                            <input class='icon-image' type='image' id='image' src='../Images/Icons/White/256/clock.png' title='Add Time' 
                            onclick="processAddTimeClick(${n.AlertID}, ${n.JobNumber}, ${n.JobComponentNumber}, ${n.TaskSequenceNumber});"></div>`),t}function processAddTimeClick(n,t,i,r){let u=`Employee/Timesheet/Entry?a=${n}&emp=${_EmployeeCode}&j=${t}&jc=${i}&s=${r}`;openRadWindowWithEvents("Add Time",u,600,600,!1)}function stopwatchTemplate(n){return n.Category=="Task"||n.JobNumber>0&&n.JobComponentNumber>0?`<div stopwatch-cell='${n.AlertID}' class='icon-background background-color-sidebar standard-light-green'>
                            <input class='icon-image' type='image' id='image' src='../Images/Icons/White/256/stopwatch.png' title='Click to start Stopwatch' 
                            onclick="processStopwatchClick(${n.AlertID}, ${n.JobNumber}, ${n.JobComponentNumber}, ${n.TaskSequenceNumber});"></div>`:""}function processStopwatchClick(n,t,i,r){console.log(window.appBase);r==null&&(r=-1);let u={EmployeeCode:_EmployeeCode};$.post({url:"../Employee/Timesheet/HasStopwatch",dataType:"json",data:JSON.stringify(u)}).always(function(f){f&&(f.StopwatchIsRunning===!0?showKendoConfirm("There is a stopwatch already running.\nStop it and start a new stopwatch?").done(function(){$.post({url:"../Employee/Timesheet/StopStopwatch",dataType:"json",data:u}).always(function(u){u&&startStopWatch(n,t,i,r)})}).fail(function(){return!1}):startStopWatch(n,t,i,r))})}function startStopWatch(n,t,i,r){let f="Timesheet Stopwatch",e="Timesheet_Stopwatch.aspx",u={AlertID:n,JobNumber:t,JobComponentNumber:i,TaskSequenceNumber:r};console.log(u);$.ajax({type:"POST",url:"Inbox/StopWatchStart",data:JSON.stringify(u),contentType:"application/json",success:function(n){n.OpenStopWatch?openRadWindowWithEvents(f,e,475,500,!1):showKendoAlert(n.ErrorMessage)},error:function(){showKendoAlert("An error occurred while attempting to start the stopwatch, please contact support.")}})}