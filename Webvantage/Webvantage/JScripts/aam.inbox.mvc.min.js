function LoadUserColumnSettings(){userViewSettingsReady===!1?setTimeout(LoadUserColumnSettings,250):(GenerateColumnDetailSettings(),LoadUserGridView())}function LoadUserGridView(){if(columnSettingsReady===!1)setTimeout(LoadUserGridView,250);else{if(createGridDataSource(),aagrid=AlertFilter.InboxType==="task"?CreateTaskViewGrid():CreateAAViewGrid(),AlertFilter.InitialLoadFlag){let n=$("#aagrid").data("kendoGrid");n.setDataSource(n.dataSource);n.dataSource.read()}AAGrid_SubscribeToShared()}}function GetGroupSecuritySettings(){$.ajax({url:"Inbox/GroupSecuritySettings",dataType:"json",success:function(n){for(let t=0;t<n.length;t++)n[t].SettingName==="ShowAllAssignments"&&(GroupSecuritySettings.ShowAllAssignments=n[t].SettingValue),n[t].SettingName==="ShowUnassignedAssignments"&&(GroupSecuritySettings.ShowUnassignedAssignments=n[t].SettingValue),n[t].SettingName==="AllowTaskEdit"&&(GroupSecuritySettings.AllowTaskEdit=n[t].SettingValue);GroupSecuritySettings.ShowAllAssignments==="False"?($("#buttonAllAssignments").addClass("k-state-disabled"),$("#buttonAllAssignments").prop("disabled",!0)):($("#buttonAllAssignments").removeClass("k-state-disabled"),$("#buttonAllAssignments").prop("disabled",!1));GroupSecuritySettings.ShowUnassignedAssignments==="False"?($("#buttonUnassigned").addClass("k-state-disabled"),$("#buttonUnassigned").prop("disabled",!0)):($("#buttonUnassigned").removeClass("k-state-disabled"),$("#buttonUnassigned").prop("disabled",!1))},error:function(){}})}function GetUserViewSettings(n){!_fromBookmarkFlag||isJobJacketView?$.ajax({url:"Inbox/GetUserViewSettings",data:{ApplicationName:n},dataType:"json",success:function(n){for(let t=0;t<n.length;t++)n[t].SettingName==="AAM_SearchCriteria"&&(UserViewSettings.SearchCriteria=n[t].SettingValue),n[t].SettingName==="AAM_InboxType"&&(UserViewSettings.InboxType=n[t].SettingValue),n[t].SettingName==="AAM_ShowAssignmentType"&&(UserViewSettings.ShowAssignmentType=n[t].SettingValue),n[t].SettingName==="AAM_GroupBy"&&(UserViewSettings.GroupBy=n[t].SettingValue),n[t].SettingName==="AAM_ShowOnlyTempCompletedTasks"&&(UserViewSettings.ShowOnlyTempCompletedTasks=n[t].SettingValue=="True"?!0:!1),n[t].SettingName==="AAM_IncludeBacklog"&&(UserViewSettings.IncludeBacklog=n[t].SettingValue=="True"?!0:!1),n[t].SettingName==="AAM_GridSize"&&(UserViewSettings.GridSize=n[t].SettingValue),n[t].SettingName==="AAM_JJIncludeCompleted"&&isJobJacketView&&(UserViewSettings.JJIncludeCompleted=n[t].SettingValue=="True"?!0:!1);SetUserViewSettings();userViewSettingsReady=!0},error:function(){}}):(UserViewSettings.SearchCriteria=AlertFilter.SearchCriteria,UserViewSettings.InboxType=AlertFilter.InboxType,UserViewSettings.ShowAssignmentType=AlertFilter.ShowAssignmentType,UserViewSettings.ShowOnlyTempCompletedTasks=AlertFilter.ShowOnlyTempCompletedTasks,UserViewSettings.IncludeBacklog=AlertFilter.IncludeBacklog,UserViewSettings.GroupBy=urlParms.get("aamgb"),UserViewSettings.GridSize=urlParms.get("aamgs"),SetUserViewSettings(),userViewSettingsReady=!0)}function SyncUserViewSettings(){UserViewSettings.SearchCriteria=AlertFilter.SearchCriteria;UserViewSettings.InboxType=AlertFilter.InboxType;UserViewSettings.ShowAssignmentType=AlertFilter.ShowAssignmentType;UserViewSettings.GroupBy=AlertFilter.GroupBy;UserViewSettings.ShowOnlyTempCompletedTasks=AlertFilter.ShowOnlyTempCompletedTasks;UserViewSettings.IncludeBacklog=AlertFilter.IncludeBacklog;let n=$(".k-pager-sizes span.k-input").text();UserViewSettings.GridSize=n&&["10","15","20","50","100","200"].includes(n)?n:"10";isJobJacketView&&(UserViewSettings.JJIncludeCompleted=AlertFilter.IncludeCompletedAssignments)}function SetUserViewSettings(){try{!_fromBookmarkFlag||isJobJacketView?(UserViewSettings.SearchCriteria!==""&&(AlertFilter.SearchCriteria=UserViewSettings.SearchCriteria,$("#Search").val(UserViewSettings.SearchCriteria)),UserViewSettings.InboxType!==""&&(AlertFilter.InboxType=UserViewSettings.InboxType,(UserViewSettings.InboxType==="dismissed"||UserViewSettings.InboxType==="all")&&SetDateFilters(AlertFilter.InboxType),UserViewSettings.InboxType==="dismissed"&&($("#buttonUnassigned").addClass("k-state-disabled"),$("#buttonUnassigned").prop("disabled",!0))),UserViewSettings.ShowAssignmentType!==""&&(AlertFilter.ShowAssignmentType=UserViewSettings.ShowAssignmentType,UserViewSettings.ShowAssignmentType!=="unassigned"&&UserViewSettings.ShowAssignmentType!=="allalertassignments"?(AlertFilter.EmployeeCode=_EmployeeCode,$("#empMS").data("kendoMultiSelect").value([AlertFilter.EmployeeCode])):(AlertFilter.EmployeeCode="",$("#empMS").data("kendoMultiSelect").value([{}]))),UserViewSettings.GroupBy!==""&&(AlertFilter.GroupBy=UserViewSettings.GroupBy),AlertFilter.ShowAssignmentType!=="myalerts"&&AlertFilter.ShowAssignmentType!=="unassigned"&&(UserViewSettings.ShowOnlyTempCompletedTasks?($("#ShowOnlyTempCompletedTasks").attr("checked",!0),AlertFilter.ShowOnlyTempCompletedTasks=!0):($("#ShowOnlyTempCompletedTasks").attr("checked",!1),AlertFilter.ShowOnlyTempCompletedTasks=!1)),AlertFilter.ShowAssignmentType!=="myalerts"&&(UserViewSettings.IncludeBacklog?($("#IncludeBacklogItems").attr("checked",!0),AlertFilter.IncludeBacklog=!0):($("#IncludeBacklogItems").attr("checked",!1),AlertFilter.IncludeBacklog=!1))):(AlertFilter.ShowAssignmentType!=="unassigned"&&AlertFilter.ShowAssignmentType!=="allalertassignments"?(AlertFilter.EmployeeCode=_EmployeeCode,$("#empMS").data("kendoMultiSelect").value([AlertFilter.EmployeeCode])):(AlertFilter.EmployeeCode="",$("#empMS").data("kendoMultiSelect").value([{}])),ManageAssignmentTypeButtons(AlertFilter.ShowAssignmentType),$("#startdate").data("kendoDatePicker").value(AlertFilter.StartDate),$("#duedate").data("kendoDatePicker").value(AlertFilter.DueDate),$("#Search").val(AlertFilter.SearchCriteria));isJobJacketView&&UserViewSettings.JJIncludeCompleted!==""&&(AlertFilter.IncludeCompletedAssignments=UserViewSettings.JJIncludeCompleted,AlertFilter.IncludeCompletedAssignments!="False"&&AlertFilter.IncludeCompletedAssignments!="false"&&AlertFilter.IncludeCompletedAssignments?$("#includeCompletedItems").prop("checked",!0):$("#includeCompletedItems").prop("checked",!1));userViewSettingsReady=!0}catch(n){console.log(n)}}function UpdateUserViewSettings(n){if(!_fromBookmarkFlag||isJobJacketView){SyncUserViewSettings();let t=[];t.push({SettingName:"AAM_SearchCriteria",SettingValue:UserViewSettings.SearchCriteria});t.push({SettingName:"AAM_InboxType",SettingValue:UserViewSettings.InboxType});t.push({SettingName:"AAM_ShowAssignmentType",SettingValue:UserViewSettings.ShowAssignmentType});t.push({SettingName:"AAM_GroupBy",SettingValue:UserViewSettings.GroupBy});t.push({SettingName:"AAM_ShowOnlyTempCompletedTasks",SettingValue:UserViewSettings.ShowOnlyTempCompletedTasks});t.push({SettingName:"AAM_GridSize",SettingValue:UserViewSettings.GridSize});t.push({SettingName:"AAM_IncludeBacklog",SettingValue:UserViewSettings.IncludeBacklog});isJobJacketView&&t.push({SettingName:"AAM_JJIncludeCompleted",SettingValue:UserViewSettings.JJIncludeCompleted});$.ajax({type:"POST",url:"Inbox/UpdateUserViewSettings",data:JSON.stringify({UserSettings:t,ApplicationName:n}),contentType:"application/json",success:function(){},error:function(){}})}}function allCommentsClick(){let n="";n=`JobComponent_Comments.aspx?a=0&j=${AlertFilter.JobNumber}&jc=${AlertFilter.JobComponentNumber}`;OpenRadWindow("Comments for Job: ",n,450,710,!0)}function includeCompleted(){AlertFilter.IncludeCompletedAssignments=$("#includeCompletedItems").prop("checked")==!0?!0:!1;UpdateUserViewSettings(_viewType);var n=$("#aagrid").data("kendoGrid");n.dataSource.read()}function onInboxViewChange(){let t=GetViewValue(),n=AlertFilter.InboxType;AlertFilter.InboxType=t;gridDirty?promptSave().done(()=>ProcessInboxViewChange(n)):ProcessInboxViewChange(n)}function GetViewIndex(n){return n=="inbox"?0:n=="dismissed"?1:n=="all"?2:n=="task"?3:4}function GetViewValue(){let n=$("#AAView").data("kendoDropDownList");return n.value()==="Current"?"inbox":n.value()==="Dismissed/Completed"?"dismissed":n.value()==="All"?"all":n.value()==="Drafts"?"drafts":n.value()==="Task List View"?"task":"inbox"}function CompleteTempComplete(){let u=$("#aagrid").data("kendoGrid").dataSource,f=0,t=0,e=u.filter(),o=u.data(),s=new kendo.data.Query(o),i=s.filter(e).data,r="";for(let n=0;n<i.length;n++)t=i[n].AlertID,f!==t&&i[n].IsMyTaskTempComplete&&(r+=n===0?t:","+t),f=i[n].AlertID;let n={AssignedEmployee:AlertFilter.EmployeeCode,Role:AlertFilter.EmployeeRole,ProjectManager:"All",Office:"All",TaskStatus:"",SearchCriteria:AlertFilter.SearchCriteria,AlertID:r};console.log(n);n.Role==""&&(n.Role="All");(n.AssignedEmployee==""||n.AssignedEmployee===undefined)&&(n.AssignedEmployee="All");$.ajax({type:"POST",data:JSON.stringify(n),contentType:"application/json",url:"Inbox/CompleteTempComplete",success:function(){refreshPage("")},error:function(n){n.Message.length>0&&showKendoAlert(n.Message)}})}function DismissAll(){promptDismissAll()}function ProcessDismissAll(){let r=$("#aagrid").data("kendoGrid").dataSource,u=0,t=0,f=r.filter(),e=r.data(),o=new kendo.data.Query(e),n=o.filter(f).data,i=[];for(let r=0;r<n.length;r++)t=n[r].AlertID,u!==t&&n[r].IsMyAlert&&i.push(t),u=n[r].AlertID;console.log(i);$.ajax({type:"POST",data:{AlertIDs:i},url:"Inbox/DismissComplete",success:function(){let n=$("#aagrid").data("kendoGrid");setTimeout(function(){n.dataSource.read()},1e3)},error:function(n){n.Message.length>0&&showKendoAlert(n.Message)}})}function ClearFilters(){let n=$("#aagrid").data("kendoGrid").dataSource;n.filter({})}function GetGrouping(){let n=[];if(UserViewSettings.GroupBy&&UserViewSettings.GroupBy.length>0){let t=UserViewSettings.GroupBy.split(" ");for(let i=0;i<t.length;i++)n.push({field:t[i]})}return n}function ResizeGrid(n){if($("#aagrid").offset().top){var t=$("#aagrid").offset().top,i=$(window).height();let r=$("#aagrid").data("kendoGrid");n==!0?$("#aagrid").height(i-t-15):$("#aagrid").height(i-t-15);r!==undefined&&r.resize()}}function unSavedChanges(){return _scope.saveAvailable()}function GetGridView(){let n="";switch(AlertFilter.InboxType){case"inbox":n="RadGridAlertInbox";break;case"dismissed":n="RadGridAlertDismissed";break;case"all":n="RadGridAlertAll";break;case"task":n="AAMTaskViewGrid";break;case"drafts":n="RadGridAlertDrafts"}return n}function DestroyGrid(){var n=$("#aagrid").data("kendoGrid");n.destroy();$("#aagrid").empty()}function ReloadGrid(){if($("#aagrid").data("kendoGrid")===undefined)setTimeout(ReloadGrid,250);else{let n=$("#aagrid").data("kendoGrid");n.setDataSource(n.dataSource);n.dataSource.read();UpdateUserViewSettings(_viewType)}}function ProcessInboxViewChange(n){let t=GetViewValue();t==="dismissed"?($("#buttonUnassigned").removeClass("k-state-active"),$("#buttonUnassigned").addClass("k-state-disabled"),$("#buttonUnassigned").prop("disabled",!0),AlertFilter.ShowAssignmentType==="unassigned"&&($("#buttonMyAlertsAndAssignments").addClass("k-state-active"),AlertFilter.ShowAssignmentType="myalertsandassignments",$("#empMS").data("kendoMultiSelect").value([AlertFilter.EmployeeCode]),UpdateUserViewSettings(_viewType))):GroupSecuritySettings.ShowUnassignedAssignments==="False"?($("#buttonUnassigned").addClass("k-state-disabled"),$("#buttonUnassigned").prop("disabled",!0)):($("#buttonUnassigned").removeClass("k-state-disabled"),$("#buttonUnassigned").prop("disabled",!1));n!==AlertFilter.InboxType&&(columnSettingsReady=!1,DestroyGrid(),LoadUserColumnSettings(),SetDateFilters(GetViewValue()),ReloadGrid())}function SetDateFilters(n){let t=new Date,i="",r="";r=kendo.toString(kendo.parseDate(t),"MM/dd/yyyy");$("#duedate").data("kendoDatePicker").value(r);n=="dismissed"||n=="all"?(t.setDate(t.getDate()-30),i=kendo.toString(kendo.parseDate(t),"MM/dd/yyyy"),$("#startdate").data("kendoDatePicker").value(i)):($("#startdate").data("kendoDatePicker").value(""),i=null);AlertFilter.StartDate=i;AlertFilter.EndDate=r}function promptDismissAll(){let n=jQuery.Deferred();return this.showKendoConfirm("<p><strong>Are you sure you want to dismiss all alerts in the filtered inbox?<\/strong><p>").done(function(){ProcessDismissAll();setTimeout(()=>{},500);n.resolve()}).fail(function(){n.resolve()}),n.promise()}function promptSave(){let n=jQuery.Deferred();return promptSaveActive=!0,this.showKendoSaveContinue("<p><strong>Pending Changes Will Be Lost <\/strong> are you sure you want to continue without saving?<p>").done(function(){saveGridChanges();setTimeout(()=>{},500);promptSaveActive=!1;n.resolve()}).fail(function(){$(".k-dirty").removeClass("k-dirty");var t=$("#aagrid").data("kendoGrid");t.dataSource.read();promptSaveActive=!1;n.resolve()}),gridDirty=!1,enableSave(),n.promise()}function unSavedChanges(){return gridDirty}function ParentContainerSave(){saveGridChanges()}function cancelChanges(){showKendoConfirm("Are you sure you want to cancel all unsaved changes? You cannot undo this operation.").done(function(){gridDirty=!1;refreshPage("")}).fail(function(){})}function getParentRefreshFlag(){return parentRefreshFlag}function getJobJacketAssignmentType(n){return n}function refreshPage(n){if(gridDirty&&n!=="parent")promptSave();else{console.log("stop");UpdateUserViewSettings(_viewType);var t=$("#aagrid").data("kendoGrid");gridDirty=!1;enableSave();t.dataSource.read()}}function saveGridChanges(){let i=$("#aagrid").data("kendoGrid"),r=i.dataSource.data(),n=$.grep(r,function(n){return n.dirty});isJobJacketView&&(parentRefreshFlag=!0);let t=[];for(let i=0;i<n.length;i++){let r={UID:"",AlertID:"",AlertCategoryID:"",TaskStatus:"",StartDate:"",StartDateDirty:!1,DueDate:"",DueDateDirty:!1,Priority:"",PriorityDirty:!1};r.UID=n[i].uid;r.AlertID=n[i].AlertID;r.AlertCategoryID=n[i].AlertCategoryID;r.TaskStatus=n[i].TaskStatus;r.StartDate=n[i].StartDate;n[i].dirtyFields.StartDate&&(r.StartDateDirty=!0);r.DueDate=n[i].DueDate;n[i].dirtyFields.DueDate&&(r.DueDateDirty=!0);r.Priority=n[i].Priority;n[i].dirtyFields.Priority&&(r.PriorityDirty=!0);t.push(r)}let u=JSON.stringify(t);n.length>0&&$.ajax({type:"POST",url:"Inbox/ProcessDataGridUpdates",data:u,contentType:"application/json",success:function(){gridDirty=!1;enableSave();$(".k-dirty").removeClass("k-dirty");updatePriorityIcon(t);(UserViewSettings.GroupBy.includes("StartDate")&&t[0].StartDateDirty||UserViewSettings.GroupBy.includes("DueDate")&&t[0].DueDateDirty||UserViewSettings.GroupBy.includes("Priority")&&t[0].PriorityDirty)&&refreshPage("")},error:function(n){console.log("An error occurred during update: "+n.message)}})}function getTaskTitleDescription(n,t){return priorityTooltip=n==="H"?"High Priority":n==="L"?"Low Priority":n==="A"?t==1?"Active (Highest Priority)":t===2?"Active (High Priority)":t===3?"Active (Normal)":t===4?"Active (Low Priority)":"Active (Lowest Priority)":n=="P"?t==1?"Projected (Highest Priority)":t==2?"Projected (High Priority)":t==3?"Projected (Normal)":t==4?"Projected (Low Priority)":"Projected (Lowest Priority)":"N/A"}function getDetailTitleDescriptionByPriority(n){let t="";switch(n){case"1":t="Highest Priority/Click to view details";break;case"2":t="High Priority/Click to view details";break;case"3":t="Normal Priority/Click to view details";break;case"4":t="Low Priority/Click to view details";break;case"5":t="Lowest Priority/Click to view details"}return t}function getClassByPriority(n){let t="";return t=n=="1"?"highest":n=="2"?"high":n=="3"?"normal":n=="4"?"low":"lowest",`alert-priority-${t}`}function updatePriorityIcon(n){for(let t=0;t<n.length;t++){if(n[t].PriorityDirty){let i="td div[priority-cell = '"+n[t].AlertID+"']",f="td div[priority-cell = '"+n[t].AlertID+"'] input",r="td div[task-cell = '"+n[t].AlertID+"']",e="td div[task-cell = '"+n[t].AlertID+"'] input",u=getClassByPriority(n[t].Priority);$(i).removeClass(function(n,t){return(t.match(/(^|\s)alert-priority-\S+/g)||[]).join(" ")});$(r).removeClass(function(n,t){return(t.match(/(^|\s)alert-priority-\S+/g)||[]).join(" ")});$(i).addClass(u);$(f).attr("title",getDetailTitleDescriptionByPriority(n[t].Priority));$(r).addClass(u);$(e).attr("title",getTaskTitleDescription(n[t].TaskStatus,n[t].Priority))}if(n[t].DueDateDirty){let o=$("#aagrid").data("kendoGrid").dataSource,s=o.getByUid(n[t].UID),f="",r="",e="",i="",u="";u=kendo.toString(kendo.parseDate(n[t].DueDate,"yyyy-MM-dd"),"MM/dd/yyyy");$.ajax({url:"Inbox/GetDateDiffAndWeekendStatus",dataType:"json",data:{DateValue:u},success:function(o){f=getDueDateClassFlag(o.DateDifference,o.IsWeekendDate,n[t].DueDate);dueDateClassText=getDueDateClass(o.DateDifference,o.IsWeekendDate,n[t].DueDate);r="div[taskflag-cell='"+n[t].AlertID+"']";e="div[taskflag-cell='"+n[t].AlertID+"'] input";$(r).removeClass(function(n,t){return(t.match(/(^|\s)standard-\S+/g)||[]).join(" ")});$(r).removeClass("projected");$(r).addClass(f);$(e).attr("title",getDueDateTitle(o.DateDifference,u,o.IsWeekendDate,n[t].DueDate));i="div[taskduedate-cell='"+n[t].AlertID+"']";$(i).closest("td").removeClass(function(n,t){return(t.match(/(^|\s)standard-\S+/g)||[]).join(" ")});$(i).closest("td").removeClass("projected");$(i).closest("td").addClass(dueDateClassText);$(i).attr("title",getDueDateTitle(o.DateDifference,u,o.IsWeekendDate,n[t].DueDate))},error:function(){}})}}}function ExportToExcel(){let n=$("#aagrid").data("kendoGrid");n.saveAsExcel()}function bookmarkPage(){let n=$("#startdate").data("kendoDatePicker"),t=$("#duedate").data("kendoDatePicker"),i="",r="";n.value()!==null&&(i=n.value().toDateString());t.value()!==null&&(r=t.value().toDateString());let u={SearchCriteria:$("#Search").val(),InboxType:GetViewValue(),ShowAssignmentType:UserViewSettings.ShowAssignmentType,StartDate:i,EndDate:r,EmployeeCode:AlertFilter.EmployeeCode?AlertFilter.EmployeeCode:"",GridSize:UserViewSettings.GridSize,GroupBy:AlertFilter.GroupBy,ShowOnlyTempCompletedTasks:AlertFilter.ShowOnlyTempCompletedTasks};$.ajax({type:"POST",data:u,dataType:"json",url:"Inbox/BookmarkAlertInbox",success:function(n){console.log(n.Success);n.Success?showKendoAlert("Bookmark successfully added."):showKendoAlert("Bookmark already exists.")},error:function(){showKendoAlert("An error occurred while generating bookmark, please contact support.")}})}function clearSearch(){console.log("clearSearch");$("#Search").val("");AlertFilter.SearchCriteria="";UpdateUserViewSettings(_viewType);var n=$("#aagrid").data("kendoGrid");n.dataSource.filter({});n.dataSource.read()}function onNewAlertClick(){gridDirty?promptSave().done(()=>ProcessNewAlertClick()):ProcessNewAlertClick()}function onNewAssignmentClick(){gridDirty?promptSave().done(()=>ProcessNewAssignmentClick()):ProcessNewAssignmentClick()}function ProcessNewAlertClick(){let n="";n=isJobJacketView?`Alert_New.aspx?f=1&jt=1&content=1&caller=jobtemplate&j=${AlertFilter.JobNumber}&jc=${AlertFilter.JobComponentNumber}`:"Alert_New.aspx?f=0";openRadWindowWithEvents("",n,null,1145,!0,function(){refreshPage("")})}function ProcessNewAssignmentClick(){let t=this,n="";n=isJobJacketView?`~Desktop_NewAssignment?f=1&jt=1&content=1&caller=jobtemplate$assn=1&j=${AlertFilter.JobNumber}&jc=${AlertFilter.JobComponentNumber}`:"~Desktop_NewAssignment";openRadWindowWithEvents("",n,null,1145,!0,function(){refreshPage("")})}function enableSave(){gridDirty===!0?($("#saveButton").removeClass("k-state-disabled"),$("#cancelButtonVis").removeClass("k-state-disabled"),$("#saveButton").prop("disabled",!1),$("#cancelButtonVis").prop("disabled",!1),$("#ResetOptionsButton").prop("disabled",!0),$("#ResetOptionsButton").addClass("k-state-disabled")):($("#saveButton").addClass("k-state-disabled"),$("#cancelButtonVis").addClass("k-state-disabled"),$("#saveButton").prop("disabled",!0),$("#cancelButtonVis").prop("disabled",!0),$("#ResetOptionsButton").prop("disabled",!1),$("#ResetOptionsButton").removeClass("k-state-disabled"))}function search(){var n=$("#startdate").data("kendoDatePicker"),i=n.value(),t,r,u,f;i!==null&&(i=n.value().toDateString());n=$("#duedate").data("kendoDatePicker");t=n.value();t!==null&&(t=n.value().toDateString());r=$("#empMS").data("kendoMultiSelect");u=r.value();AlertFilter.EmployeeCode=u[0];AlertFilter.SearchCriteria=$("#Search").val();AlertFilter.InboxType=GetViewValue();AlertFilter.StartDate=i;AlertFilter.EndDate=t;UpdateUserViewSettings(_viewType);f=$("#aagrid");f.data("kendoGrid").dataSource.read()}function onAssignmentTypeClick(n){gridDirty?promptSave().done(()=>RefreshGridByAssignmentType(n)):(UserViewSettings.ShowAssignmentType!=="unassigned"&&UserViewSettings.ShowAssignmentType!=="allalertassignments"?(AlertFilter.EmployeeCode=_EmployeeCode,$("#empMS").data("kendoMultiSelect").value([AlertFilter.EmployeeCode])):(AlertFilter.EmployeeCode="",AlertFilter.EmployeeRole="",AlertFilter.Department="",$("#empMS").data("kendoMultiSelect").value([]),$("#roleMS").data("kendoMultiSelect").value([]),$("#departmentMS").data("kendoMultiSelect").value([])),RefreshGridByAssignmentType(n));AlertFilter.IsClientPortal=="True"&&$("#ShowOnlyTempCompletedTasksDiv").hide()}function formatEmployeeCodeArray(n){return'"'+n.replaceAll(",",'", "')+'"'}function RefreshGridByAssignmentType(n){let r=$("#empMS").data("kendoMultiSelect"),i=$("#startdate").data("kendoDatePicker"),t="",f="",e=GetViewValue();n==="myalerts"||n==="unassigned"?($("#ShowOnlyTempCompletedTasks").prop("checked",!1),$("#ShowOnlyTempCompletedTasksDiv").hide(),AlertFilter.ShowOnlyTempCompletedTasks=!1):$("#ShowOnlyTempCompletedTasksDiv").show();n==="myalerts"?($("#IncludeBacklogItems").prop("checked",!1),$("#IncludeBacklogItemsDiv").hide(),AlertFilter.IncludeBacklog=!1):$("#IncludeBacklogItemsDiv").show();n.substr(0,2)=="my"&&r.value(_EmployeeCode);(n=="unassigned"||n=="allalertassignments")&&r.value([]);t=i.value();f=r.value();t!==null&&(t=i.value().toDateString());AlertFilter.StartDate=t;i=$("#duedate").data("kendoDatePicker");t!==null&&(t=i.value().toDateString());AlertFilter.EndDate=t;AlertFilter.EmployeeCode=f[0];AlertFilter.SearchCriteria=$("#Search").val();AlertFilter.InboxType=e;AlertFilter.ShowAssignmentType=n;UpdateUserViewSettings(_viewType);let u=$("#aagrid").data("kendoGrid");u.setDataSource(u.dataSource);u.dataSource.read();ManageAssignmentTypeButtons(n)}function ManageDismissAllButton(n,t,i){t==="inbox"?i>0&&(n==="myalerts"||n==="myalertsandassignments")?$("#btnDismissAll").removeClass("k-state-disabled"):$("#btnDismissAll").addClass("k-state-disabled"):$("#btnDismissAll").addClass("k-state-disabled")}function ManageAssignmentTypeButtons(n){$("#buttonMyAlertsAndAssignments").removeClass("k-state-active");$("#buttonMyAlerts").removeClass("k-state-active");$("#buttonMyAssignments").removeClass("k-state-active");$("#buttonAllAssignments").removeClass("k-state-active");$("#buttonUnassigned").removeClass("k-state-active");manageEmployeeFilterStatus();switch(n){case"unassigned":$("#buttonUnassigned").addClass("k-state-active");AreGridRowsReorderable=!1;break;case"myalertsandassignments":$("#buttonMyAlertsAndAssignments").addClass("k-state-active");AreGridRowsReorderable=!1;break;case"myalerts":$("#buttonMyAlerts").addClass("k-state-active");AreGridRowsReorderable=!0;break;case"myalertassignments":$("#buttonMyAssignments").addClass("k-state-active");AreGridRowsReorderable=!0;break;case"allalertassignments":$("#buttonAllAssignments").addClass("k-state-active");AreGridRowsReorderable=!1}}function ManageCompleteTempCompleteButton(){GroupSecuritySettings.AllowTaskEdit==="False"?($("#btnCompleteTempComplete").addClass("k-state-disabled"),$("#btnCompleteTempComplete").prop("disabled",!0)):($("#btnCompleteTempComplete").removeClass("k-state-disabled"),$("#btnCompleteTempComplete").prop("disabled",!1))}function alertAction(n,t,i,r){let u="",f={AlertID:n,SprintID:t,Category:i};u=r===1?"Inbox/ProcessComplete":r===2?"Inbox/DeleteAlert":r===3?"Inbox/ReOpenAlert":"Inbox/DismissComplete";r===1||r===2?$.ajax({type:"POST",data:JSON.stringify(f),contentType:"application/json",url:u,success:function(n){n.ShowDialog?onAssignToClick(n.Message,"Confirm Alert Completion"):n.Message&&showKendoAlert(n.Message);let t=$("#aagrid").data("kendoGrid");t.dataSource.read()},error:function(n){n.Message.length>0&&showKendoAlert(n.Message)}}):r===3?$.ajax({type:"POST",data:{AlertID:n},url:u,success:function(n){n.Success||(showKendoAlert(n.Message),n.Message.length>0&&showKendoAlert(n.Message));let t=$("#aagrid").data("kendoGrid");t.dataSource.read()},error:function(n){n.Message.length>0&&showKendoAlert(n.Message)}}):$.ajax({type:"POST",data:{AlertIDs:f.AlertID},url:u,success:function(n){n.Success||(showKendoAlert(n.Message),n.Message.length>0&&showKendoAlert(n.Message));let t=$("#aagrid").data("kendoGrid");t.dataSource.read()},error:function(n){n.Message.length>0&&showKendoAlert(n.Message)}});refreshCurrentDashboard();refreshAlertNotifications()}let _fromBookmarkFlag=!1,_sortedField="",_sortedDirection="",GroupSecuritySettings={ShowAllAssignments:!0,ShowUnassignedAssignments:!0,AllowTaskEdit:!0},UserViewSettings={SearchCriteria:"",InboxType:"inbox",ShowAssignmentType:"myalertsandassignments",GroupBy:"",ShowOnlyTempCompletedTasks:!1,IncludeBacklog:!1,GridSize:10,JJIncludeCompleted:""};$(window).resize((n,t)=>{ResizeGrid(t)});